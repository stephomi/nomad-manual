# ![](/icons/postprocess.webp) Постобработка {#post-process}

Это меню управляет многими аспектами Nomad, влияя на внешний вид рендера.

![](/images/postprocess_overview_drac.webp)

Использование постобработки может существенно изменить финальный вид вашей сцены.

![](/images/postprocess_overview.webp)
*Одна и та же сцена до и после постобработки, без дополнительных источников света или изменений материалов.*

Постобработка может сильно влиять на производительность в зависимости от вашего устройства.
Есть глобальный чекбокс для отключения всей постобработки, чтобы вы могли быстро вернуться к скульптингу/моделированию, не теряя свои пресеты.
Для PBR‑рендеринга следует включить [Ambient Occlusion](#ambient-occlusion-ssao), [Reflection](#reflection-ssr) и [Tone Mapping](#tone-mapping).

Однако чаще всего вы захотите отключать постобработку во время скульптинга, чтобы сосредоточиться на самой форме в рендере.


## Качество {#quality}

![](/images/postprocess_quality.webp)
### Максимальная дискретизация кадров {#max-frame-sampling}
Nomad будет рассчитывать определённое количество постобработки для одного кадра, что может выглядеть шумно. Этот параметр определяет, сколько кадров будет отрендерено и затем смешано, чтобы убрать большую часть шумовых артефактов. Некоторым эффектам не нужны дополнительные сэмплы (например, цветокоррекция), тогда как другим, таким как глобальное освещение, могут потребоваться сотни сэмплов для избавления от шума. 

Во вьюпорте это видно, когда Nomad оставляют в покое: качество изображения постепенно улучшается до максимального количества сэмплов, а затем останавливается. Это количество вычислений также используется в разделе рендера меню [Files](files), когда нажимается «export png».

### Множитель разрешения {#resolution-multiplier}
Этот слайдер управляет разрешением постобработки. Значение x1.0 означает, что рендер выполняется в пиксельном разрешении устройства. Значение x0.5 будет рендерить в половинном разрешении — быстрее, но с более низким качеством. Значение больше 1 рендерит в большем размере, а затем масштабирует вниз. Это даёт более высокое качество, меньше шума, но более длительное время рендера.

### Максимум сэмплов {#max-samples}

Увеличивает качество постобработки, но в целом `Full resolution` оказывает большее влияние. 

### Подавление шума (oidn) {#oidn}

Применяет к изображению денойзер. Это позволяет использовать гораздо меньшее количество сэмплов. Работает только если включён `Full Resolution`. Обратите внимание, что денойзинг выполняется после того, как все сэмплы были рассчитаны, и может быть ресурсоёмким.

## Браузер пресетов {#preset-browser}
![](/images/postprocess_presets.webp)
Нажатие на изображение откроет коллекцию пресетов постобработки. Чтобы создать собственный пресет, выберите один, нажмите «clone», внесите изменения. Для сохранения нажмите на изображение пресета, затем ещё раз внутри браузера пресетов и выберите «save».


## Отражение (SSR) {#reflection-ssr}
С этой опцией объекты могут отражать другие объекты в сцене, пока эти объекты видимы на экране.
Если в вашей сцене есть металлические и блестящие объекты, эту опцию, вероятно, стоит использовать.
Эта опция эффективна только в режиме PBR.


| SSR off                    | SSR on                    |
| :------------------------: | :-----------------------: |
| ![](/images/ssr_off.webp) | ![](/images/ssr_on.webp) |

## Глобальное освещение (SSGI) {#global-illumination-ssgi}

Глобальное освещение имитирует, как свет отражается между поверхностями, например, красная стена будет отбрасывать красный оттенок на близлежащий белый объект. В сочетании с ambient occlusion и отражениями это может значительно повысить реалистичность рендера. 

`Strength` — интенсивность глобального освещения. 



| SSGI off                   | SSGI on                   |
| :------------------------: | :-----------------------: |
| ![](/images/ssgi_off.webp) | ![](/images/ssgi_on.webp) |

_За сферой находится прожектор, направленный на потолок. При выключенном SSGI освещён только потолок. При включённом SSGI свет отражается от потолка к стенам и к сфере._

## Окруженное затенение (SSAO) {#ambient-occlusion-ssao}
Ambient occlusion затемняет области, куда свету сложнее попасть (углы и т. п.).
Эффект зависит только от геометрии модели.

* `Strength` — интенсивность эффекта.
* `Size` — насколько широко распространяется эффект.
* `Curvature bias` — чувствительность эффекта к изменению поверхности.
* `Color` — оттенок, умножаемый на окклюзию, используется для творческих эффектов.


| SSAO off                    | SSAO on                    |
| :-------------------------: | :------------------------: |
| ![](/images/ssao_off.webp) | ![](/images/ssao_on.webp) |

::: tip
AO будет наиболее заметен в областях, освещённых в основном окружающим светом (environment light). Области под сильным прямым светом будут получать гораздо более слабый эффект AO.

:::

## Глубина резкости (DOF) {#depth-of-field-dof}
Добавляет эффект размытия в области, находящейся вне фокуса.

Просто нажмите на модель, чтобы изменить точку фокусировки.

* `Far blur` — степень размытия на дальней стороне от точки фокуса.
* `Near blur` — степень размытия между точкой фокуса и камерой.


| DOF off                   | DOF focus on far ring       | DOF focus on close ring    |
| :-----------------------: | :-------------------------: | :------------------------: |
| ![](/images/dof_off.webp) | ![](/images/dof_near.webp) | ![](/images/dof_far.webp) |


## Свечение {#bloom}
Bloom заставляет яркие области вашей сцены светиться.

* `Intensity` — сила эффекта.
* `Radius` — распространение эффекта.
* `Threshold` — насколько яркими должны быть пиксели в сцене, прежде чем они начнут «светиться». Низкое значение заставит светиться всё, высокое — только самые яркие пиксели.
* `Color` — оттенок, который можно добавить к bloom для творческих эффектов.

| Bloom off                    | Bloom with radius 0         | Bloom with radius 1         |
| :--------------------------: | :-------------------------: | :-------------------------: |
| ![](/images/bloom_off.webp) | ![](/images/bloom_r0.webp) | ![](/images/bloom_r1.webp) |


## Тональная компрессия {#tone-mapping}
Tone Mapping — это операция, которая отображает HDR‑значения в диапазон `[0, 1]`.
Если его не использовать (или выбрать `none`), любая цветовая компонента выше 1 будет обрезана.
Любые цветовые вариации выше этого диапазона будут потеряны.

* `None/Neutral/Agx/ACES` — какой тонмаппер использовать. `None` не выполняет ремаппинг (но остальные контролы всё равно работают). Остальные варианты похожи на выбор разных типов фотоплёнки: они по‑разному обрабатывают пересвеченные значения и цвета. Это очень глубокая тема, поищите информацию о tone mapping, Agx, ACES для подробностей.
* `Exposure` — общая яркость изображения, аналогично регулировке диафрагмы камеры. Это быстрый способ глобально осветлить или затемнить изображение.
* `Saturation` — насыщенность цвета. 1 — нейтрально, 0 — монохром, значения выше 1 — всё более насыщенные.
* `Contrast` — делает тёмные области темнее, а светлые — светлее. Используйте осторожно, на высоких значениях может вносить артефакты.

Обратите внимание, что при отключённом `Tone Mapping` некоторые детали исчезают, потому что пиксели слишком яркие.

| Tone Mapping off            | Tone Mapping on            |
| :-------------------------: | :------------------------: |
| ![](/images/tone_off.webp) | ![](/images/tone_on.webp) |

::: tip
Tone mapping может усилить эффект глобального освещения. Если уменьшить интенсивность карты окружения, увеличить мощность основного источника света, можно повысить `exposure` в tone mapping, чтобы лучше увидеть эффекты отражённого света.
:::

## Цветокоррекция {#color-grading}
Аналогично инструменту Curves в Photoshop, позволяет управлять балансом и распределением цвета в изображении. Контрол `main` влияет на общий цветовой баланс, а `red`/`green`/`blue` дают тонкую настройку. 

| Color Grading off             | Color Grading on             |
| :---------------------------: | :--------------------------: |
| ![](/images/grading_off.webp) | ![](/images/grading_on.webp) |

## Кривизна {#curvature}
Обнаруживает области с резкими изменениями кривизны и применяет к ним цвет.

* `Factor` — общая интенсивность эффекта
* `Bump` — насколько сильно будут находиться резкие выпуклые изменения и окрашиваться выбранным цветом (по умолчанию белым)
* `Cavity` — насколько сильно будут обнаруживаться вогнутые изменения и окрашиваться выбранным цветом (по умолчанию чёрным)


| Curvature off                    | Curvature on                   |
| :------------------------------: | :----------------------------: |
| ![](/images/curvature_off.webp) | ![](/images/curvature_on.webp) |


## Хроматическая аберрация {#chromatic-aberration}
Имитирует артефакты объектива, при которых свет разлагается по краям экрана.

* `Strength` — насколько сильно красные/зелёные/синие части изображения раздвигаются к краям экрана

| Chromatic off                 | Chromatic on                 |
| :---------------------------: | :--------------------------: |
| ![](/images/chroma_off.webp) | ![](/images/chroma_on.webp) |


## Виньетка {#vignette}
Имитирует артефакты объектива, затемняя края экрана.

* `Size` — размер инвертированного эллипса, наложенного на изображение
* `Hardness` — насколько размыто или резко эллипс смешивается с изображением.


| Vignette off                    | Vignette on                    |
| :-----------------------------: | :----------------------------: |
| ![](/images/vignette_off.webp) | ![](/images/vignette_on.webp) |

## Зерно {#grain}
Добавляет эффект плёнчатого зерна, что может помочь сделать изображение менее искусственным.

* `Strength` — количество зерна/шума, добавляемого к изображению.


| Grain off                    | Grain on                   |
| :--------------------------: | :------------------------: |
| ![](/images/grain_off.webp) | ![](/images/grain_on.webp) |


## Резкость {#sharpness}
Эффект резкости, похожий на тот, что есть в Photoshop или приложениях для обработки фото.

* `Strength` — степень повышения резкости изображения.


| Sharpness off                  | Sharpness on                 |
| :----------------------------: | :--------------------------: |
| ![](/images/sharpen_off.webp) | ![](/images/sharpen_on.webp) |

## Пиксель-арт {#pixel-art}
Имитирует пиксельную графику ретро‑игр.

* `Slider` — размер пикселей
* `Allow frame sampling` — если вы получаете много чёрных пикселей, попробуйте включить эту опцию, которая переопределит стандартное семплирование.

| Pixel off                   | Pixel on                   |
| :-------------------------: | :------------------------: |
| ![](/images/pixel_off.webp) | ![](/images/pixel_on.webp) |

## Строчная развертка {#scanline}
Имитирует вид старых ЭЛТ‑мониторов.

* `Factor` — сила линий
* `Spacing` — размер линий

| Scanline off                   | Scanline on                   |
| :----------------------------: | :---------------------------: |
| ![](/images/scanline_off.webp) | ![](/images/scanline_on.webp) |


## Дизеринг {#dithering}

Применяет дизеринг пикселей для уменьшения полос (banding‑артефактов). Обычно это следует оставлять включённым, но можно отключать для специфических операций (например, экспорт карт глубины или других задач, чувствительных к данным).