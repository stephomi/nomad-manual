# ![](/icons/scene.webp) Сцена {#scene}

Это меню позволяет управлять объектами, источниками света, камерами и репитерами в Nomad. Оно отображает иерархию сцены в виде древовидного списка, позволяя изменять множество аспектов ваших объектов. Также через него можно создавать новые объекты, а также объединять и разделять объекты различными способами.


![](/images/scene_menu_summary.webp)


## Панель ярлыков {#shortcut-bar}
| Действие              | Значок                            | Описание                                                                                                           |
| :-------------------: | :-------------------------------: | :----------------------------------------------------------------------------------------------------------------: |
| [Добавить...](#add-menu) | ![](/icons/plus.webp)         | Открыть [меню добавления](#add-menu) для добавления объекта в сцену                                               |
| Удалить               | ![](/icons/trash.webp)           | Удалить объект                                                                                                     |
| Заблокировать         | ![](/icons/lock.webp)            | Сделать объект недоступным для выбора во вьюпорте. Его всё ещё можно выбрать в древовидном списке.               |
| Объединить            | ![](/icons/merge.webp)           | Объединить выбранные объекты в один объект без изменения геометрии                                                |
| Разделить             | ![](/icons/diagonal.webp)        | Если объект состоит из отдельных оболочек полигонов, разбить его на отдельные объекты. Обратная операция к Join  |
| [Булево...](#boolean) | ![](/icons/subtract_circle.webp) | Открыть меню [Булево](#boolean)                                                                                   |
| Клон                  | ![](/icons/clone.webp)           | Дублировать объект как новый отдельный объект                                                                      |
| Экземпляр             | ![](/icons/link.webp)            | Дублировать объект как экземпляр, чтобы изменения моделирования одного применялись ко всем экземплярам            |
| Разорвать экземпляр   | ![](/icons/unlink.webp)          | Преобразовать экземпляр в уникальную форму, чтобы изменения больше не копировались на другие экземпляры           |
| Синхронизировать      | ![](/icons/link.webp)            | Если у экземпляров есть дочерние объекты, гарантировать, что все экземпляры имеют одинаковую иерархию детей       |


## Дерево сцены {#tree-view}
![](/images/scene_treeview.webp) 

| Действие    | Значок                    | Описание                    |
| :---------: | :-----------------------: | :-------------------------: |
| Выбрать     | ![](/icons/checked.webp) | Переключить выбор/снятие   |
| Видимый     | ![](/icons/eye_open.webp) | Переключить видимость      |
| Меню        | ![](/icons/more.webp)    | Показать меню объекта      |

::: tip СОВЕТ: Быстрое выделение или скрытие множества объектов

Нажмите на значок выбора, чтобы переключить один объект, или проведите пальцем вертикально по колонке выбора, чтобы выделить много объектов. То же самое можно сделать с колонкой видимости.

:::

### Управление деревом сцены {#tree-view-manipulation}

Сделайте долгое нажатие на элемент в древовидном списке, пока он не станет жёлтым. Затем вы можете перемещать его вверх или вниз по списку, а также перетащить его на другой элемент, чтобы сделать его дочерним по отношению к этому элементу.

Когда выбрано много элементов, большинство из них будут тёмно‑жёлтыми, один — более светло‑жёлтым. Сделайте долгое нажатие и перетаскивание по более светлому элементу, чтобы переместить все объекты сразу.

Когда вы выбираете родительский элемент, по умолчанию также выбираются все дочерние элементы. Нажатие на значок родителя будет переключать режим между выбором только родителя или родителя вместе с детьми.

### Меню объекта {#object-menu}

Нажатие кнопки с многоточием (...) для объекта в древовидном списке откроет меню объекта. 
Многие из этих опций аналогичны кнопкам на панели ярлыков сверху и продублированы для удобства.

|       Действие       |                        Значок                        | Описание                                                                                                                                                               |
| :------------------: | :--------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|      Экземпляр       |               ![](/icons/link.webp)                | Дублировать объект как экземпляр, чтобы изменения моделирования одного применялись ко всем экземплярам                                                               |
|         Клон         |              ![](/icons/clone.webp)                | Дублировать объект как новый отдельный объект                                                                                                                         |
|        Имя           |              ![](/icons/pencil.webp)               | Изменить имя объекта                                                                                                                                                  |
|       Удалить        |              ![](/icons/trash.webp)                | Удалить объект                                                                                                                                                        |
|      Удалить+        |            ![](/icons/removeNode.webp)             | Удалить объект и всех его потомков                                                                                                                                    |
|   Разорвать экземпляр |              ![](/icons/unlink.webp)              | Преобразовать экземпляр в уникальную форму, чтобы изменения больше не копировались на другие экземпляры                                                              |
| Разделить топологию  |             ![](/icons/separate.webp)              | Если объект состоит из отдельных оболочек полигонов, разбить его на отдельные объекты. Обратная операция к объединению                                              |
| Разделить по группам граней | ![](/icons/faceGroup.webp)          | Если у объекта несколько групп граней, разбить сетку на отдельные объекты                                                                                            |
|  Разделить по слоям  |              ![](/icons/layer.webp)                | Если у объекта есть слои, разделить каждый слой в отдельный объект. Полезно для отправки blendshape‑ов в другие приложения                                           |
| Объединить -> Слои   | ![](/icons/merge.webp) -> ![](/icons/layer.webp) <span style="visibility:hidden">_________</span> | Если выбрано несколько объектов с совпадающей топологией, объединить эти объекты в слои основного объекта (остальные объекты будут удалены). Снова полезно для blendshape‑ов, приходящих ИЗ других приложений.<br><br> Обратите внимание, что слои по умолчанию будут отключены. Включите их, если нужно отрегулировать их ползунки. |




### Множественный выбор {#multiselection}
Вы можете выбирать несколько объектов, чтобы:

- использовать инструмент гизмо для одновременного перемещения нескольких объектов
- объединять объекты с помощью операций Join и Boolean.

Это можно сделать, включив флажок `Multiselection`, а затем нажимая на объекты в списке.

::: tip Быстрый множественный выбор
Также можно делать множественный выбор во вьюпорте, удерживая ярлык `Smooth` и нажимая на другую сетку.

Вы можете снять выделение с объекта, нажав на него ещё раз (только если в выделении более одного объекта).
:::

::: warning Ограничения гизмо
При множественном выборе инструмент гизмо всегда игнорирует маску.
Также отключается масштабирование по осям X/Y/Z.

Причина в том, что множественный выбор позволяет трансформировать только целые сетки, а не отдельные вершины.
В будущем это может быть улучшено.
:::


## Объединить {#join}
Эта опция просто создаст одну запись объекта из нескольких выбранных объектов.

Пример можно увидеть на видео в разделе [Separate](#separate).

## Булево {#boolean}
![](/images/scene_boolean_menu.webp) 
Объединяет объекты в одну поверхность.

`Voxel merge` сохранит объём объектов и вычислит новые равномерно распределённые полигоны на поверхности. Из‑за этапа вычисления воксельное объединение может обрабатывать сложную геометрию, но может потерять мелкие детали, если целевое разрешение недостаточно высокое.

`Boolean` попытается сохранить исходную раскладку полигонов и сшить полигоны в местах пересечения объектов. Это может дать гораздо более чистый и резкий результат, чем воксельное объединение, однако требует «водонепроницаемых» (watertight) сеток: в объектах не должно быть дыр или некорректных форм. Если операция не удаётся, обычно помогает воксельное объединение.

### Булевы операции {#boolean-operations}
И Voxel Merge, и Boolean используют видимость объектов для управления операцией:

#### Объединение {#union}
Оба объекта видимы — создаётся булево **объединение** (union), внешняя оболочка объектов объединяется без внутренних поверхностей. ![](/images/boolean_union.webp)

#### Вычитание {#subtract}
Один объект невидим = булево **вычитание** (subtract), невидимый объект будет вычтен из видимого. ![](/images/boolean_subtract.webp)

#### Пересечение {#intersect}
Оба объекта невидимы = булево **пересечение** (intersection), создаётся новая форма только в области пересечения двух объектов. ![](/images/boolean_intersect.webp)


### Кнопка Voxel Merge {#voxel-merge-button}
Нажатие этой кнопки выполнит операцию воксельного объединения над выбранными объектами. При применении к одному объекту она выполнит ретопологию в равномерно распределённые полигоны, что полезно, если у объекта вытянутые полигоны.

### Разрешение {#resolution}
Разрешение воксельной 3D‑сетки, используемой для вычислений. При изменении этого значения на объект накладывается шахматный узор для предварительного просмотра размера полигонов.

### Построить мультираcрешение {#build-multiresolution}
Создать уровни мультиразрешения ниже целевого разрешения. Например, если ваше разрешение 400 и Build multiresolution равно 3, вы получите новую сетку примерно с 296 000 полигонов, но при этом будет 3 уровня подразделения ниже: 74 000, 18 000, 4 000.

### Сохранять острые края {#keep-sharp-edges}
Включить привязку воксельной сетки к рёбрам. Лучше всего работает на простых формах.

### Кнопка Boolean {#boolean-button}
Нажатие этой кнопки выполнит булеву операцию над полигонами с использованием библиотеки Manifold от Emmett Lalish. 


## Разделить {#separate}
Если у вас один объект, состоящий из нескольких несвязанных частей, вы можете разделить этот объект на несколько объектов. 
Это можно рассматривать как противоположность [простому объединению](#simple-merge).

![](/videos/merge_separate.mp4)


## Меню добавления {#add-menu}

![](/images/scene_addmenu_overview.webp)

Это меню создаёт примитивы, группы, камеры, репитеры и источники света.

Примитивы — это базовые типы форм, которые можно настраивать с помощью параметров. После того как вы настроили примитив под свои нужды, его нужно «валидировать» — параметры запекаются в полигональную сетку, которую можно скульптить и раскрашивать. После валидации параметры примитива больше нельзя изменять.


![](/images/scene_addmenu_top.webp)

### На гизмо {#on-gizmo}
Включить размещение нового примитива в позиции текущей выбранной формы или гизмо. Если выключено, примитив будет помещён в центр сцены.

### Выбрать гизмо {#select-gizmo}
Включить автоматическое переключение на инструмент гизмо при создании нового примитива. 

### Дополнительно {#add-advanced}

Это меню позволяет задать предпочтения, где будут создаваться новые примитивы, группы и репитеры. Они могут создаваться на выбранном объекте, в мировом центре или в позиции гизмо.


### UV {#uvs}
Включить UV‑координаты у примитивов. UV (часто называемые текстурными координатами) — это дополнительные данные в 3D, позволяющие накладывать текстуры на поверхности. Они занимают больше памяти, но для большинства устройств это не проблема, пока вы не выходите на очень высокое количество полигонов (например, 10 миллионов и более). 

### Примитивы {#primitives}

| Примитив      | Значок                                   | Описание                                                                                                           |
| :-----------: | :--------------------------------------: | :----------------------------------------------------------------------------------------------------------------: |
| Box           | ![](/icons/cube.webp)                  | Простой куб, можно управлять количеством делений по X, Y и Z                                                      |
| Sphere        | ![](/icons/circle.webp)                | Для удобства называется сферой, но на самом деле это подразделённый куб с принудительно включённым `Project on sphere` |
| Cylinder      | ![](/icons/cylinder.webp)              | Можно добавить центральное отверстие, например, чтобы сделать полую трубу                                         |
| Torus         | ![](/icons/torus.webp)                 | Тор — хороший старт для создания колец                                                                            |
| Cone          | ![](/icons/cone.webp)                  | -                                                                                                                 |
| Icosahedron   | ![](/icons/icosahedron.webp)           | -                                                                                                                 |
| UV-sphere     | ![](/icons/circle.webp)                | Сфера с неравномерной раскладкой полигонов, см. [предупреждение ниже](#uv-sphere)                                 |
| Plane         | ![](/icons/rectangle.webp)             | Простой плейн, обратите внимание, что это единственный незамкнутый примитив                                       |
| Tube          | ![](/icons/tool_tube.webp)             | см. [Tube](tools#tube)                                                                                            |
| Lathe         | ![](/icons/tool_lathe.webp)            | см. [Lathe](tools#lathe)                                                                                          |
| Triplanar     | ![](/icons/triplanar.webp)             | см. [Triplanar](#triplanar)                                                                                       |
| Shadow Catcher | ![](/icons/material_shadow_catcher.webp) | см. [Shadow Catcher](#shadow-catcher)                                                                          |
| Head          | ![](/icons/face.webp)                  | Простая голова со слоем для смешивания мужских/женских пропорций                                                 |

::: tip
Если вы задаётесь вопросом, какая базовая сетка используется при запуске Nomad: это тоже подразделённый куб.
Однако базовая сетка в Nomad не использует `Project on sphere`, то есть она не идеально круглая.
:::

### Панель инструментов примитивов {#primitive-toolbar}

![](/images/scene_primitive_toolbar.gif)

После создания примитива появляется панель инструментов для управления его параметрами.

* `Validate` Запечь примитив в стандартный объект, чтобы его можно было скульптить и раскрашивать.
* `Edit` Переключить отображение гизмо примитива. Оно показывается прямо на примитиве и управляет его параметрами, например шириной куба или радиусом отверстия цилиндра.
* `Mirror` Включить размещение зеркального репитера над примитивом.
* `...` Открыть меню примитива.

У разных примитивов на панели могут быть дополнительные опции:

* `Project` Сфера строится как подразделённый куб, что лучше для скульптинга, но из‑за этого она не идеально круглая. Эта опция приближает форму к идеальной сфере. Этой опцией также пользуется икосаэдр.
* `Cap` Включить/выключить торцевые крышки у формы, например цилиндр может иметь крышки сверху, снизу, с обеих сторон или без них.
* `Hole` Включить создание отверстия через центр формы. Переключается между отсутствием отверстия, отверстием с единым радиусом и отверстием с разным радиусом сверху и снизу.
* `Radius` Переключить, должен ли цилиндр иметь единый радиус или разные радиусы сверху и снизу.
* `Disk` Переключить, должен ли плейн быть четырёхугольником или круглой формой.

Малая панель под основной позволяет переключаться между гизмо примитива и гизмо трансформации.

::: tip

Нажатие на заголовок панели переключает её расположение между верхом и низом экрана. Нажатие на стрелку в углу сворачивает её.

:::


### Меню примитива {#primitive-menu}

![](/images/scene_primitive_menu.webp)

Здесь находятся все параметры выбранного примитива. Параметры — это базовое описание формы. Например, чтобы описать кольцо, вы задаёте внешний радиус, внутренний радиус и количество полигонов.

Большинство параметров примитивов должны быть интуитивно понятны, есть и общие параметры для всех примитивов:

* `UVs` Небольшая кнопка UVs вверху меню включает/выключает создание UV‑координат
* `Validate` Небольшая кнопка Validate запекает примитив в стандартный объект, чтобы его можно было скульптить и раскрашивать
* `Max faces` Установить верхний предел количества полигонов в объекте, чтобы избежать вылета приложения
* `Post subdivision` Включить выбранное количество уровней подразделения из секции multiresolution меню топологии. Это можно использовать для создания сглаженных примитивов с мягкими углами в сочетании с низким количеством делений топологии. Например, установите деления топологии куба в 2, а Post subdivision в 4 — получится куб с мягкими углами.
* `Linear subdivision` Задать, сколько уровней линейного подразделения использовать до применения обычного сглаживающего подразделения. Это позволяет контролировать, насколько острыми или мягкими будут углы на подразделённых поверхностях. Например, установите деления топологии куба в 2, Post subdivision в 4, затем меняйте Linear subdivision от 0 до 4 — углы куба будут меняться от мягких к острым.

### Топология {#topology}

Управляет количеством полигонов в примитиве. Обычно элементы управления связаны, поэтому изменение активного ползунка равномерно изменяет количество полигонов. Можно нажать кнопку разъединения и управлять делениями по X/Y/Z отдельно.

### Геометрия {#geometry}

Управляет общим размером примитива: по осям X/Y/Z для прямоугольных форм и по радиусу для круглых форм.


### UV‑сфера {#uv-sphere}
::: warning
UV Sphere плохо подходит для скульптинга, особенно в области полюсов.

Предпочтительнее использовать примитивы [Sphere](#sphere), [Box](#box) или [Icosahedron](#icosahedron) вместе с опцией `Project on sphere`.

Обратите внимание, что топология может быть приемлемой для скульптинга, если использовать очень низкое значение ползунков `Division`.
Затем можно использовать ползунок `Overall Subdivision`, чтобы увеличить количество полигонов.

Хотя UV Sphere не подходит для общего скульптинга, она полезна для глаз: если повернуть сферу так, чтобы полюса оказались в области зрачка, раскладка полигонов естественным образом подойдёт для рисования и скульптинга радужки и зрачка.
:::


### Трипланар {#triplanar}
Этот примитив особенный тем, что для формирования геометрии следует использовать [инструмент маскирования](tools.md#mask).

![](/videos/triplanar.mp4)


::: tip
Дважды нажмите на плоскость, и камера сфокусируется на этой конкретной плоскости.
Однако это не сработает, если вы вращали примитив с помощью гизмо.
:::

Triplanar использует информацию маски с трёх плоскостей для заполнения воксельной сетки, которая затем полигонализируется (с помощью [воксельного ремешера](topology.md#voxel-remeshere)).

У каждой плоскости есть собственная плоскость симметрии.

::: warning
Каждый раз при изменении размера примитива Triplanar качество прорисовки маски будет ухудшаться.

Пока нет опции «заблокировать» рисование на одной плоскости, но возможно она появится в будущем.
Вы можете немного помочь себе, используя [Connected Topology](stroke.md#connected-topology): если курсор точно лежит на одной плоскости, он не будет затрагивать другие.
:::

### Ловушка тени {#shadow-catcher}
Добавить плоскость с материалом Shadow Catcher. Подробнее см. [материал Shadow Catcher](material.md#shadow-catcher). 


## Группа/Камера {#groupcamera}
### Группа {#group}
Создать «пустой» объект, к которому можно привязывать другие объекты как дочерние. Это можно использовать просто для организации иерархии, помещая множество объектов в группу и сворачивая её. Группа также может служить вспомогательным объектом для перемещения: поместите в неё несколько объектов и затем перемещайте, вращайте и масштабируйте саму группу с помощью гизмо.

### Добавить вид {#add-view}
Создать камеру.

## Повторители {#repeaters}
![](/images/scene_primitive_repeaters.webp)

Репитеры — это узлы, которые создают экземпляры объектов, находящихся под ними. 

### Массив {#array}
![](/images/scene_primitive_array.webp)

Когда объекты становятся дочерними для этого узла, они могут инстанцироваться в виде сетки. При выборе доступны следующие элементы управления:
* Fit inside — переключение между управлением размером сетки/бокса массива и управлением расстоянием между экземплярами массива
* CountX/Y/Z — количество экземпляров по каждой оси
* OffsetX/Y/Z — расстояние между экземплярами, когда Fit inside выключен
* SizeX/Y/Z — ширина/высота/глубина всей сетки массива, когда Fit inside включён.

### Кривая {#curve}
![](/images/scene_primitive_curve.webp)
Создаёт кривую, вдоль которой повторяются дочерние объекты. При выборе доступны:
* Edit — позволяет добавлять точки на кривую и перемещать точки кривой
* Snap — привязывает точки кривой к другой геометрии
* Align — поворачивает дочерние формы по направлению кривой
* Count — количество экземпляров
* Closed — переключает кривую между замкнутой (соединены начало и конец) и открытой
* Radius — включает элементы управления на каждой точке кривой для управления масштабом экземпляров
* Twist — включает элементы управления на каждой точке кривой для управления скручиванием экземпляров 
* B-spline — переключает, должны ли экземпляры следовать кривой точно или использовать B-spline‑интерполяцию с более плавным результатом. 

### Радиальный {#radial}
![](/images/scene_primitive_radial.webp)

Дочерние объекты этого узла будут инстанцированы по кругу. Перемещайте дочерний объект, чтобы изменить радиус репитера. При выборе доступны:
* RadialX/Y/Z — выбор этих кнопок задаёт ось вращения и количество экземпляров.



### Зеркало {#mirror}
![](/images/scene_primitive_mirror.webp)

Дочерние объекты этого узла будут зеркально отражены относительно оси. При выборе доступны:
* Gizmo — включить гизмо трансформации для задания центра зеркала. Его также можно вращать и масштабировать. Когда закончите, снова нажмите Gizmo, чтобы вернуться к стандартным элементам управления.
* X/Y/Z — задать плоскость зеркала

У всех репитеров есть элемент `Validate`, который запекает результат работы репитера и предлагает, как выполнить запекание:
* Join children — экземпляры объединяются в один объект
* Keep instances — экземпляры остаются экземплярами, но больше не имеют «родителя»‑репитера
* Un-instances — экземпляры преобразуются в уникальные объекты

::: tip Совет: комбинирование репитеров
Репитеры можно вкладывать друг в друга, а несколько объектов можно делать дочерними для репитеров, что позволяет получать сложные эффекты.

![](/images/scene_repeater_combine.webp)
:::

::: tip Совет: pivot‑точки репитеров

Некоторые репитеры пытаются автоматически выставлять pivot дочерних объектов, поэтому даже если вы перемещаете или вращаете их гизмо, они не двигаются. Если нужно переопределить это поведение, вставьте группу между репитером и дочерним объектом. Теперь вы сможете перемещать форму независимо от репитера.
:::

## Свет {#light}

![](/images/scene_primitive_light.webp)

### Направленный {#directional}
Создать направленный источник света — бесконечно удалённый источник, подобный солнцу.

### Прожектор {#spot}
Создать прожектор с управлением шириной и мягкостью конуса

### Точечный {#point}
Создать точечный источник света

## Дополнительно {#advanced}
### Фокус на объекте {#focus-on-item}
Двойной щелчок по элементу в списке Scene центрирует камеру на этом элементе в 3D‑виде.

### Синхронизировать видимость {#sync-visibility}
Использование значка глаза влияет на все выбранные элементы. 

### Экземпляр: показывать {#instance-show}
Показывать цветную капсулу слева от списка сцены для обозначения экземпляров.


### Значки {#icons}
Настроить размер и прозрачность значков групп, источников света, камер и зеркал во вьюпорте

### Линии иерархии {#hierarchy-lines}
Показывать линии между родителем и его дочерними объектами во вьюпорте

## Нижняя панель инструментов {#bottom-toolbar}
Эти значки переключают видимость групп, источников света, камер, репитеров и линий иерархии во вьюпорте.