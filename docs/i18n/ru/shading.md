# ![](/icons/sun.webp) Освещение

Это меню управляет режимами затенения, используемыми в Nomad, параметрами освещения и свойствами окружающего света/маткапа.

![](/images/shading_overview.webp)



Вы можете выбрать один из нескольких режимов рендеринга:

| Mode                        | Meaning                    | Description                                                     |
| :-------------------------: | :------------------------: | :-------------------------------------------------------------: |
| [Lit(PBR)](#pbr)            | Physically Based Rendering | Рисование с использованием металличности/шероховатости          |
| [Matcap](#matcap)           | Material Capture           | Используется при скульптинге, требует меньше ресурсов GPU/CPU, чем PBR |
| [Unlit](#unlit)             | Surface Color              | Только цвет поверхности, без затенения и освещения              |
| [Object Id](#object-id)      | Object ID                  | Случайный цвет для каждого объекта, полезно для покраски        |
| [Instance Id](#instance-id)  | Instance ID                | Случайный цвет для каждого инстанса, полезно для идентификации общих мешей |

Если вы хотите узнать больше о металличности и шероховатости, смотрите раздел [Vertex Paint](painting.md).

---

![](/images/shading_second.webp)

### Face Group
Наложение цветов групп граней. Группы граней — это цветные выделения полигонов, которые можно создать инструментом [Face group](tools#facegroup); они также создаются автоматически для большинства примитивов.

Некоторые инструменты автоматически фильтруют по группам граней, когда группы граней видимы.

### Show paint
Nomad может хранить цвет, шероховатость и металличность в вершинах вашей скульптуры. Вы можете глобально включать и выключать отображение этих свойств этим чекбоксом.

Обратите внимание: если у вас есть и вершинные свойства, и текстуры, и оба варианта включены, значения будут перемножаться.

### Show mask
Переключает градационный (grayscale) оверлей маски из [инструментов маски](tools#mask). Когда это отключено, маска также отключается — это полезно, чтобы быстро внести изменения без маски, а затем снова включить её, не потеряв саму маску.

### Use Hide

Переключает отображение скрытых граней. Обратите внимание: это работает только если вы НЕ находитесь в инструменте Hide!

### Use textures

Nomad позволяет назначать текстуры объектам из меню [material](material). Если текстуры назначены, их можно глобально включать и выключать этим чекбоксом.







### Обзор PBR и источников света
В этом руководстве не рассматриваются подробности физически корректного рендеринга (Physically Based Rendering).

Важно помнить, что освещение и материал полностью разделены.
Это означает, что вы можете рисовать цвет, шероховатость и металличность объекта, в то время как освещение настраивается независимо.
Это позволяет сначала раскрасить объект, а затем настраивать освещение, не ломая общий вид модели.

Источники света доступны только в [режиме PBR](#pbr).
Из соображений производительности вы ограничены максимум 4 источниками света.

::: tip
Вы можете загрузить файл glTF с более чем 4 источниками света, и Nomad сохранит их все.
Однако производительность может сильно упасть.
:::

::: tip
Можно имитировать множество источников света, делая объекты незатенёнными/эмиссive, а затем включив глобальное освещение в меню [post process](postprocess).
:::

### Обзор типов источников света

Поддерживаются следующие типы источников света:

| Mode                        | Description                                             | Can cast shadows                                       |
| :-------------------------: | :-----------------------------------------------------: | :----------------------------------------------------: |
| [Directional](#directional) | Бесконечно удалённый солнечный свет                    | yes                                                    |
| [Environment](#environment) | Дальний свет, соответствующий HDR окружения           | yes                                                    |
| [Spot](#spot)               | Конические источники света                             | Yes                                                    |
| [Point](#point)             | Точечный источник света во все стороны                 | Yes, but only through less robust screen-space shadows |

#### Directional
Излучает свет из бесконечно далёкой точки с равномерной интенсивностью.
Его 3D‑позиция в сцене не имеет значения, важна только ориентация.

Вы можете привязать этот свет к камере, чтобы освещение было постоянным.  
Например, можно использовать его как контровой свет (сильный источник, светящий сзади модели в сторону камеры), который всегда подсвечивает заднюю часть модели.

#### Environment light
Использование [environment hdr](#environment) хорошо подходит для мягкого общего освещения, но если в HDR есть яркий резкий источник света, создаваемая им тень будет очень мягкой и часто почти незаметной. Комбинация направленного света с HDR окружения может помочь, но их бывает сложно выровнять.

Этот тип света делает это за вас. Источник автоматически поворачивается так, чтобы выровняться с самой яркой частью HDR, после чего вы можете отдельно управлять его интенсивностью и углом (мягкостью тени). 

#### Spot
Прожектор (spot light) излучает свет в одном направлении, ограниченном формой конуса.

#### Point
Точечный источник света излучает во всех направлениях.  
В данный момент точечный свет не поддерживает тени.

#### Shadows
Параметр `normal bias` можно использовать для уменьшения типичных артефактов теней (acne/peter-panning).

Качество теней зависит от размера объектов относительно всей сцены.  
Если у вас есть большой объект в сцене, которому не нужно отбрасывать тени (например, большой полигон-плоскость), обязательно отключите отбрасывание теней в его [настройках материала](material.md#cast-shadows).

## Lights

![](/images/shading_lights.webp)

### ![](/icons/checked.webp) Lights checkbox

Переключает все прямые источники света в сцене.



### Add light

Добавляет источник света в сцену, максимум до 4. Когда свет добавлен, появляется список источников света с кнопками, а в верхней части вьюпорта появляется панель инструментов света.

![](/images/shading_lights_icons.webp)

* Текст показывает имя источника света и яркость.
* Значок глаза переключает видимость.
* Значок карандаша позволяет переименовать источник света.
* Значок корзины удаляет источник света.
* Значок копирования дублирует источник света. 
* Значок с 3 точками открывает полный редактор света. Большинство этих функций также доступны с панели инструментов, появляющейся во вьюпорте. 

### ![](/icons/spotlight.webp)  Icons

Переключает отображение иконок источников света во вьюпорте.

### Light toolbar
![](/images/shading_lights_toolbar.webp) 

Эта панель появляется в верхней части вьюпорта, когда выбран источник света.

* Show переключает видимость света.
* Directional/Environment/Spot/Point меняет тип источника света. Нажмите, чтобы переключать по кругу, или удерживайте для вызова меню.
* Intensity управляет силой света; значение может быть выше 1.0 для очень ярких источников, что полезно при использовании глобального освещения в Post Process.
* Щелчок по образцу цвета (color swatch) открывает выбор цвета. Nomad предлагает несколько способов выбора цвета. Управление по шкале Кельвина даёт естественный способ выбора тёплого/холодного освещения.
* Shadow переключает тени.
* Size задаёт ширину источника света. Более широкий свет даёт мягкие тени, мягкое освещение и более мягкий блик на объектах.
* ... открывает дополнительные настройки.

### Light extra controls

![](/images/shading_extra_controls.webp) 

Обратите внимание: некоторые параметры специфичны для определённых типов света.

* `Clone` дублирует источник света.
* `Recenter` перемещает источник света обратно в центр сцены.
* `Delete` удаляет источник света.
* `Directional/Environment/Spot/Point` позволяют изменить тип источника света.
* Щелчок по `colour swatch` открывает выбор цвета. 
* `Intensity` управляет силой света.
* `Attachment` (_только для directional_) задаёт, будет ли свет привязан к миру или к камере. Например, если вы используете направленный свет позади персонажа как контровой, при привязке к камере при вращении камеры свет всегда будет оставаться позади персонажа.
* `Angle` (_только для directional и environment_) — видимый размер источника света, можно думать об этом как о том, насколько большим кажется солнце в небе. Больший угол даёт более мягкие тени и более широкие блики.
* `Softness` (_только для spotlight_) управляет резкостью края светового конуса. 0 — очень резкий край. 1 — очень мягкий, с градиентом к центру конуса. Во вьюпорте маленькая синяя точка на конусе прожектора позволяет интерактивно настраивать мягкость.
* `Cone angle` (_только для spotlight_) управляет углом раскрытия прожектора. Малый угол — очень узкий луч, 170 — очень широкий пучок света. Во вьюпорте оранжевая точка позволяет интерактивно настраивать угол конуса.
* `Shadow` переключает тени для текущего источника света.
* `Shadow map` и `screenspace` — разные способы расчёта теней; как правило, shadow map более надёжен.
* `Contact` настраивает способ расчёта контакта теней. Тени — сложная задача в компьютерной графике и могут вызывать артефакты. Для самого важного источника света в сцене можно выбрать более точные тени; этот параметр определяет, выбирает ли такой источник автоматически Nomad или пользователь.
* `Tolerance` — если видны артефакты теней (например, тени не касаются поверхностей или внутри теней есть шум и узоры), настройка tolerance может помочь устранить эти проблемы.


## Environment

![](/images/shading_environment.webp)

В реальном мире свет приходит со всех направлений: синий от неба, зелёный от травы, красный от здания — весь этот свет от «окружения» можно имитировать картой окружения (environment map). 

Nomad поставляется с несколькими примерами карт окружения для внутренних и внешних сцен с разными оттенками и уровнями яркости. Попробуйте разные карты, чтобы увидеть, какая лучше всего подчёркивает детали ваших скульптур.

Нажмите на изображение, чтобы увидеть доступные карты окружения. В этом диалоге выберите «Import...», чтобы загрузить свою. Лучше всего использовать изображения с высоким динамическим диапазоном (HDR) в формате latlong или equirectangular, в файлах .hdr или .exr. На сайте [www.polyhaven.com](https://polyhaven.com/hdris) есть хорошая коллекция бесплатных карт окружения; обычно карты 1k hdr — хороший компромисс размера и качества.

### Exposure
Регулирует яркость карты окружения. Часто карты могут быть слишком яркими при использовании вместе с обычными источниками света; уменьшение экспозиции помогает сбалансировать освещение, особенно при использовании глобального освещения в настройках [Post Process](postprocess).

### Rotation

Поскольку карты окружения захватывают свет со всех направлений, вы можете вращать их, чтобы добиться удачного сочетания отражений и общего освещения с вашей скульптурой.

### Attached to camera
Привязывает окружение к камере.

Это обеспечивает постоянное освещение, что может быть полезно во время скульптинга.


## ![](/icons/sphere_smooth.webp) Matcap

![](/images/shading_matcap.webp)

Как следует из названия (MATerial CAPture), matcap содержит и информацию об освещении, и о материале в одном изображении.
Поскольку материал уже присутствует в matcap, каналы рисования шероховатости и металличности игнорируются.
Цвет краски умножается на matcap, то есть если у вас чёрный/серый matcap, использование белой краски не сделает его ярче.

Художники часто предпочитают этот режим для скульптинга, так как он позволяет сосредоточиться на форме и геометрии.

Нажатие на сферу откроет браузер изображений. Вы также можете добавить свой matcap: обычно подойдёт любая фотография, рендер или даже живописное изображение сферы, плотно обрезанное в квадрат. В сети доступно много библиотек matcap; полезный ресурс — [nidorx matcap library](https://github.com/nidorx/matcaps).

### Use global Matcap

Обычно художники используют один matcap для всей скульптуры, но если этот переключатель отключён, каждый объект может иметь свой matcap. Это можно использовать художественно для получения выразительных результатов.

::: tip
Отключите эту опцию и используйте изображение глазного яблока для глаз вашего персонажа!
:::

### Rotation
Matcap — это специализированная форма карты окружения, поэтому, как и карту окружения, его можно вращать. Это также можно делать в любой момент во вьюпорте, проводя тремя пальцами влево и вправо.



## ![](/icons/circle_fill.webp) Unlit

В этом режиме отображается только цвет поверхности. Это полезно, чтобы проверить, соответствует ли цвет поверхности объектов вашим ожиданиям, не отвлекаясь на свет, тени, отражения и прозрачность. 

Этот режим также можно использовать для непотографичных рендеров, чтобы получить плоский, мультяшный вид.

## ![](/icons/cube.webp) Object ID

Вся информация об освещении и поверхности игнорируется, и каждый объект закрашивается уникальным плоским цветом. Если отрендерить это вместе с PBR‑рендером, в программе для рисования можно будет выбирать по цвету и таким образом выполнять цветокоррекцию отдельных объектов.

Обратите внимание: эти цвета также будут отображаться в [древовидном виде меню Scene](scene#tree-view).

### Randomise id

Генерирует новый набор случайных цветов. 

## ![](/icons/link.webp) Instance ID

То же, что и Object ID, но инстансы будут иметь одинаковый цвет. 

### Randomise id

Генерирует новый набор случайных цветов.
