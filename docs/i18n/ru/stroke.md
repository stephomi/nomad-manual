# ![](/icons/pencil.webp) Штрих {#stroke}

---
![](/images/stroke_overview.webp) 

## Обзор {#overview}

Вы можете настраивать поведение штриха для большинства инструментов-кистей.
Настройки похожи на те, что есть в 2D‑графических редакторах, однако некоторые опции специфичны для скульптинга и 3D.

Опции разделены на 5 подменю:

| Name     | Icon                         | Description                                                        |
| :------: | :--------------------------: | :----------------------------------------------------------------: |
| Stroke   | ![](/icons/stroke_dot.webp) | Управляет тем, как штрих применяется к модели                     |
| Alpha    | ![](/icons/alpha.webp)      | Как градации серого текстуры используются в отпечатке кисти       |
| Falloff  | ![](/icons/falloff.webp)    | Управляет изменением силы кисти от центра к краю                  |
| Filter   | ![](/icons/filter.webp)     | Как кисть зависит от геометрии модели                             |
| Pressure | ![](/icons/pressure.webp)   | Управляет реакцией на нажим пера                                   |

::: tip
Не все параметры штриха применимы ко всем инструментам. Параметры, которые не используются текущим инструментом, будут отключены или скрыты. 
:::


## Штрих {#stroke-1}

### Радиус {#radius}

![](/images/stroke_radius.webp)

#### Общий радиус {#share-radius}

Если включено, все инструменты используют один и тот же радиус; по умолчанию у каждого инструмента свой радиус.

#### Размер {#size}

* Screen — радиус задаётся в экранных единицах. Если сделать радиус 100 пикселей, он останется 100 пикселей независимо от масштаба.
* Constant (3d) — радиус задаётся в 3D‑единицах. Например, если создать сферу и сделать радиус кисти равным размеру сферы, то при зумировании радиус будет оставаться одного размера со сферой.


### Штрих {#stroke-type}

![](/images/stroke_strokemode.webp)

Штрихи могут работать в нескольких режимах:

### ![](/icons/stroke_dot.webp) Точка {#dot}
Тянуть как обычный живописный штрих. 
![](/videos/stroke_dot.mp4) 

### ![](/icons/stroke_roll.webp) Прокат {#roll}
Альфа кисти будет поворачиваться по направлению штриха, полезно для создания швов ткани. 
![](/videos/stroke_roll.mp4) 

 ### ![](/icons/radius.webp) Lock + radius
Отпечаток кисти с фиксированной **_высотой_**. Перетаскивание задаёт масштаб и поворот.
![](/videos/stroke_lock_radius.mp4) 

### ![](/icons/falloff.webp) Фиксация + интенсивность {#lock-intensity}
Отпечаток кисти с фиксированным **_радиусом_**. Перетаскивание задаёт высоту и поворот.
![](/videos/stroke_lock_intensity.mp4) 

![](/images/stroke_strokemodemove.webp)

Инструменты `Move` и `Drag` имеют свои 3 опции:

### ![](/icons/snake.webp) Перетаскивание {#drag}

Во время штриха будет постоянно обновляться то, что находится внутри радиуса кисти. Быстрый штрих оставит поверхность позади, а медленный будет «держаться» за материал, создавая более длинные формы. Это режим по умолчанию для инструмента `Drag`. С `Dynamic Topology` его можно использовать для создания змееподобных экструзий. 
![](/videos/stroke_drag.mp4) 


### ![](/icons/grab.webp) Захват {#grab}
При начале штриха выбирается то, что находится внутри радиуса кисти, и эта выборка сохраняется. Это полезно для более точных перемещений, так как можно аккуратно регулировать расстояние смещения и не сдвинуть больше, чем было изначально выбрано. Это режим по умолчанию для инструмента `Move`.
![](/videos/stroke_grab.mp4) 


### ![](/icons/radius.webp) Фиксация + радиус (перетаскивание) {#lock-radius-drag}
Пользовательский радиус игнорируется и динамически задаётся в зависимости от того, насколько далеко штрих уводится от начальной точки. Малое расстояние = малый радиус, большее расстояние = больший радиус. Используйте ползунок интенсивности для управления формой затухания. Полезно для наброска органичных «резиновых» форм.
![](/videos/stroke_lockradius_drag.mp4) 



### Регулировка интервала по интенсивности {#adjust-spacing-intensity}
![](/images/stroke_space_smooth.webp)

Штрихи с малым интервалом (меньше 50%) могут быстро накапливаться, делая штрих более интенсивным, чем при больших значениях интервала. Этот переключатель компенсирует это, чтобы интенсивность штриха была примерно одинаковой независимо от интервала.

### Интервал штриха {#stroke-spacing}
Расстояние между отдельными отпечатками кисти во время перетаскивания. Значения меньше 100% дают перекрытие, создавая видимость непрерывного штриха. Значения больше 100% начинают оставлять промежутки, что полезно для проработки деталей вроде швов или молний.

### Стабилизатор «ленивая верёвка» {#lazy-rope-stabilizer}
Штрихи будут отставать от положения указателя на определённое расстояние. Это можно использовать для рисования плавных линий.
![](/videos/stroke_lazy_rope.mp4) 

### Сглаживание штриха {#stroke-smoothing}
Усредняет несколько положений указателя для получения более плавного штриха.
При высоких значениях штрих будет отставать от указателя, но в итоге догонит.
Полезно для рисования плавных линий.

### Радиус привязки {#snap-radius}
Привязывает начало штриха к концу предыдущего. Радиус определяет, на каком расстоянии искать конец предыдущего штриха. Это может быть полезно при рисовании длинных непрерывных линий с частыми паузами.

### ![](/icons/silhouette.webp) Силуэт {#silhouette}
![](/images/stroke_silhouette.webp)
По умолчанию штрихи влияют только на поверхность модели в пределах радиуса кисти. При включённой «силуэтной» проекции штрих будет проецироваться сквозь всю модель. Это очень полезно на этапе первичной блокировки формы модели или для форм, где стороны должны оставаться перпендикулярными.

Направление проекции можно задать явно; метод по умолчанию «Closest» подбирает лучший угол относительно вида. 

![](/videos/stroke_silhouette.mp4) 

### ![](/icons/dice.webp) Рандомизировать {#randomize}

![](/images/stroke_randomize.webp)

Интенсивность, смещение, поворот и масштаб штриха могут быть рандомизированы по отдельности. Это можно использовать для создания различных эффектов: например, рандомизация с инструментом Paint может создать пятнистый цвет, а с инструментом Crease — детализацию кожи.

![](/videos/stroke_randomize.mp4) 

### Смещение штриха {#stroke-offset}

Применяет постоянное смещение штриха. Полезно для маленьких экранов, где палец закрывает штрих. 


## ![](/icons/alpha.webp) Альфа {#alpha}
![](/images/stroke_alpha.webp) 

`Alpha` — это текстура, которая модулирует поведение кисти.
Это изображение в градациях серого, где чёрные пиксели означают отсутствие деформации, а белые — полную деформацию.

Нажмите на изображение альфы, чтобы изменить её.

Нажмите на предпросмотр материала, чтобы загрузить альфу из пресета материала. Здесь же можно сохранять пресеты материалов и выбирать, встраивать ли текстуры в инструмент.

::: tip
Текстура никогда не изменяет размер, поэтому большие текстуры могут замедлять работу.
:::

### Инвертировать пиксели {#invert-pixels}
Инвертирует значения изображения: чёрные пиксели станут белыми, а белые — чёрными.

::: tip

Встроенные альфы, поставляемые с Nomad, нельзя инвертировать.

:::

### Масштабирование {#scaling}

Размер кисти в Nomad — это круг с заданным пользователем радиусом. Текстуры часто квадратные или прямоугольные; параметры `Scaling` позволяют задать, как текстура должна вписываться в круг. Для квадратной текстуры значение 0.7 впишет её внутрь круга. Значение 1 увеличит текстуру так, чтобы круг помещался внутри неё, обрезая края.

![](/images/alpha_scaling.webp) 

Включение `Scaling - Y` позволяет растягивать альфу по вертикали.

![](/images/alpha_scaling_y.webp) 

### Поворот {#rotation}

Текстура альфы будет поворачиваться по направлению штриха. Можно добавить смещение поворота, и если замок включён, текстура будет оставаться зафиксированной в этом повороте относительно экрана.

### Тайлинг {#tiling}
![](/images/stroke_tiling.webp) 

Как часто текстура повторяется внутри профиля кисти. Режимы тайлинга позволяют ограничиться одной текстурой в пределах штриха, повторяющимися текстурами или зеркальными, где каждая вторая текстура переворачивается для создания узоров или бесшовных текстур.

![](/videos/alpha_tiling.mp4) 



### Среднее значение {#mid-value}

По умолчанию чёрные пиксели означают отсутствие деформации, а белые — полную положительную деформацию, то есть, например, кисть Clay с альфой камней будет вытягивать поверхность только там, где альфа не чёрная.

Если нужно, чтобы кисть вдавливала поверхность или одновременно вдавливала и вытягивала, можно изменить среднее значение. Если установить его в 0.5, то средне‑серый в альфе не будет ничего делать, чёрный будет вдавливать, белый — вытягивать.




## Спад {#falloff}

![](/images/falloff_menu.webp) 

Это похоже на [Alpha](#alpha), но интенсивность задаётся одной кривой. Она комбинируется с альфой, так что можно использовать текстуру для деталей, а Falloff — для управления затуханием по краю и интенсивностью в центре инструмента.

Когда кривая вверху — это полная деформация, когда внизу — кисть не оказывает эффекта.

Можно думать о кривой как о сечении кончика кисти. Нижняя часть даёт предпросмотр того, как будет выглядеть один «отпечаток» кисти на поверхности модели; если у кисти есть альфа‑текстура, она также будет показана, чтобы продемонстрировать взаимодействие falloff и альфы.

### Пресет {#preset}
При выборе этого режима нажатие на график кривой откроет меню пресетов. Округлые кривые дают более мягкий результат, угловатые — более резкий. Кнопка `Sub` в левой панели по сути инвертирует falloff, так что верх кривой будет вдавливать поверхность вместо вытягивания, и наоборот.

### Catmull-Rom {#catmull-rom}
В этом режиме пользователь может рисовать собственные кривые затухания. Редактор кривых работает так же, как и в остальных частях Nomad:

* Нажмите на кривую, чтобы создать новую точку
* Перетащите точку, чтобы изменить её положение
* Нажмите на точку, чтобы переключать её между острой и сглаженной
* Перетащите точку на соседнюю, чтобы удалить её

### B-spline {#b-spline}
В этом режиме пользователь также может рисовать собственные кривые затухания. Редактор работает так же, как в Catmull-Rom, но точки кривой влияют на форму, не лежа непосредственно на ней, что помогает создавать более плавные формы кривых.

У редактора кривых есть 3 кнопки:

| Item     | Icon                        | Description                                  |
| :------: | :-------------------------: | :------------------------------------------: |
| Maximize | ![](/icons/maximize.webp)  | Развернуть редактор кривой                  |
| Reset    | ![](/icons/reset.webp)     | Вернуть кривую в состояние по умолчанию     |
| Symmetry | ![](/icons/symmetric.webp) | Показать кривую как симметричный «кончик кисти» |


### Влияние {#influence}

* Sphere (3d) — влияние вычисляется по расстоянию от вершины до центра кисти.
* Circle (2d) — вершина сначала проецируется на плоскость области, затем берётся расстояние до центра кисти. Похоже на то, как семплируются альфы. 
* Cylinder — влияние проецируется через область в виде цилиндра, используется режимом Silhouette ниже.

### Силуэт {#silhouette-1}
По умолчанию штрихи влияют только на поверхность модели в пределах радиуса кисти. При включённой «силуэтной» проекции штрих будет проецироваться сквозь всю модель. Это очень полезно на этапе первичной блокировки формы модели или для форм, где стороны должны оставаться перпендикулярными.



## Фильтр {#filter}

![](/images/filter_menu.webp) 

### Накопление штриха {#accumulate-stroke}
Снимает ограничение на количество материала, которое можно добавить/удалить за один штрих. Например, у инструмента `Clay` эта опция включена, поэтому материал может накапливаться, тогда как у инструмента `Brush` она выключена, и штрихи перестают добавлять материал, если многократно проходить по одной и той же области сетки. 

### Только вершины, обращённые к камере {#front-facing-vertex-only}
Эта опция игнорирует вершины, обращённые назад.
Полезно, если нужно рисовать по части тонкой геометрии, не затрагивая другую сторону.
Работает и для скульптинга, но возможны артефакты.

### Разрешить динамическую топологию {#allow-dynamic-topology}
Эта опция доступна только если ваша сетка в режиме [Dynamic Topology](topology.md#dynamic-topology). Можно включать или отключать динамическую топологию для каждого инструмента.

### Связанная топология {#connected-topology}
Включает скульптинг только по вершинам, связанным с поверхностью, к которой вы прикасаетесь инструментом. Например, с инструментом `Move` это позволит перемещать часть, даже если она пересекается с другой частью.
![](/videos/connected_topology.mp4)

### Защитить область {#protect-area}
![](/images/filter_protect_area.webp) 

Эти опции предотвращают воздействие инструментов на части сетки при различных условиях. 

Опция «Auto» означает, что если в меню [Shading](shading) включены Hide, Mask или Facegroup, они будут защищены; если в том меню они выключены, защита отключается.

* `All` — переключатель, задающий, являются ли фильтры защиты глобальными или настраиваются для каждого инструмента.
* `Hide` — если части сетки скрыты инструментом Hide, задаёт, должны ли они быть защищены.
* `Mask` — если части сетки замаскированы, задаёт, должны ли они быть защищены.
* `Facegroup` — задаёт, можно ли использовать инструмент только внутри первой затронутой группы полигонов (facegroup).


### Сохранить острые края {#keep-sharp-edges}
Исключает точки, чьи нормали слишком сильно отличаются от нормали поверхности.

Меняет способ вычисления плоскости области (Area sampling).

Опция полезна для инструментов, основанных на выравнивании, или если нужно закрасить в основном плоскую поверхность без «перелива» на соседние.

![](/videos/filter_keep_sharp_edges.mp4)

### Семплирование области {#area-sampling}
Некоторым кистям или опциям штриха требуется нормаль плоскости и положение плоскости относительно поверхности для работы.

Можно управлять вычислением этой средней плоскости, задавая область семплирования как долю радиуса инструмента.

При 100% учитываются все точки внутри круга выделения.

При 0% учитывается только ближайшая вершина или треугольник. Эти значения можно связать для `Normal radius` и `Position radius` или разблокировать и задавать по отдельности.


### Маскирование по глубине {#depth-masking}
![](/images/stroke_depthmask.webp)

Исключает точки, которые находятся выше или ниже определённого расстояния от вычисленной плоскости (Area sampling).

Это можно использовать для рисования только по бугристым участкам или только по впадинам.

График представляет собой сечение поверхности; горизонтальная линия — это поверхность, круг — радиус затухания кисти относительно выше и ниже поверхности. `Height offset` — процент выше или ниже поверхности, с которого начинается расчёт маскирования. `Top area` и `Bottom area` позволяют масштабировать затухание выше и ниже точки смещения.

#### Пример: рисование в углублениях {#example-paint-in-cavities}
Чтобы рисовать только по впадинам, установите Height offset в -100% и отодвиньте ползунок Top area от горизонтальной линии. Это означает, что первый клик задаёт «нулевую» глубину, и будут затронуты только области ниже этой глубины.

![](/videos/stroke_depth_cavity.mp4)

#### Пример: рисование по выпуклостям {#example-paint-on-bumps}
Чтобы рисовать только по высоким участкам, установите Height offset на +90%, чтобы нижняя часть круга немного пересекала горизонтальную линию. Когда вы кликнете по вершине «высокой» зоны, это задаст глубину так, что всё на этой глубине, немного ниже и выше неё будет закрашено. Глубокие впадины будут пропущены.
![](/videos/stroke_depth_bump.mp4)


## Нажим {#pressure}
![](/images/pressure_menu.webp) 

Управляет тем, как нажим пера/стилуса влияет на кисти.

По умолчанию включено `Use global settings`, то есть все кисти используют общие значения давления.

### Нажим – радиус {#pressure-radius}

Эта кривая управляет тем, как радиус кисти зависит от давления. По умолчанию зависимость линейная, так что если у стилуса плавный отклик, изменение радиуса тоже будет ощущаться плавным. Однако у многих стилусов отклик нелинейный, что можно компенсировать этой кривой. Например, если кажется, что радиус не достигает максимума при сильном нажатии, используйте пресет кривой вроде «out-pow3» с изгибом вверх, чтобы увеличивать радиус раньше.

Этот диалог похож на окно кривой falloff: можно использовать пресет, нажав на окно кривой, или нарисовать свою кривую в режимах Catmull-Rom и B-Spline.

Если нужен постоянный радиус, отключите этот раздел.

### Нажим – интенсивность {#pressure-intensity}

Похоже на кривую радиуса, но управляет интенсивностью. Если нужна постоянная интенсивность, отключите этот раздел.

### Сглаживание нажатия {#pressure-smoothing}

Усредняет события давления стилуса для более плавного результата.