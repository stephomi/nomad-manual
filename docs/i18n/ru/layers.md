# ![](/icons/layer.webp) Слои {#layers}

В этом меню находится стек слоёв — способ хранить правки объекта недеструктивно, а также множество способов комбинировать и переиспользовать слои.

![](/images/layers_overview.webp) 

## Обзор {#overview}

Слои в Nomad выполняют несколько задач.

Информация о покраске (цвет, шероховатость, металличность, непрозрачность) работает со слоями так же, как в 2D‑графических редакторах. Можно создать слой и нанести краску на модель. Слой можно включать и выключать, изменять его непрозрачность, дублировать, менять порядок в стеке слоёв, настраивать режим наложения.

Nomad также использует слои для скульптинга. Слой может хранить мелкие детали, такие как морщины, или крупные изменения, позволяя использовать их как blendshape/shape key/morph target в других 3D‑приложениях. Например, вы можете вылепить разные мимики лица на разных слоях и затем комбинировать их, регулируя ползунки слоёв, чтобы получать новые выражения.

В этом случае изменения, хранящиеся в слое, являются строго аддитивными, и порядок слоёв не имеет значения, в отличие от покраски.

Слои можно частично стирать с помощью инструмента [Delete Layer](tools.md#delete-layer), а также использовать слои для создания масок на основе различной информации, хранящейся в слое.

![](/videos/layer.mp4)

::: tip
В отличие от большинства программ для скульптинга, изменение топологии меша не удаляет слои. Можно использовать [Voxel Remesher](topology.md#voxel-remesher), [Multiresolution](topology.md#multires) или инструменты [Trim](tools.md#trim)/[Split](tools.md#split), но имейте в виду, что при использовании [Voxel Remesher](topology.md#voxel-remesher) качество слоя ухудшится.
:::

::: tip
Если вы используете слои как blendshape/morph target, дополнительный функционал слоёв доступен в [меню сцены](scene.md#object-menu). Можно разделять слои на объекты и объединять совпадающие объекты в слои.
:::
----

## Меню слоя {#layer-menu}

![](/images/layers_menu.webp)

Нажмите `Add layer`, чтобы создать новый слой.

У каждого слоя есть имя, ползунок для управления его силой/фактором и кнопки опций.

### Параметры {#options}

| Действие     | Значок                       | Описание                                            |
| :----------: | :--------------------------: | :-------------------------------------------------  |
| Видимость    | ![](/icons/eye_open.webp)   | Показать/скрыть слой                               |
| Режим смеш.  | ![](/icons/opacity.webp)    | Режим наложения в стиле Photoshop. 4 значка показывают режимы для цвета, шероховатости, металличности и непрозрачности. |
| Изменить имя | ![](/icons/pencil.webp)     | Изменить имя слоя                                   |
| Удалить      | ![](/icons/trash.webp)      | Удалить слой                                        |
| Дублировать  | ![](/icons/clone.webp)      | Дублировать слой                                    |
| Объединить вниз | ![](/icons/merge_down.webp) | Объединить слой с нижним слоем (или базовой сеткой) |
| Ещё          | ![](/icons/more.webp)       | Опции [More...](#more)                              |

Чтобы переместить слой в другое место стека, зажмите его имя и перетащите.

### Ещё... {#more}

Кнопка «More...» показывает дополнительные опции для текущего слоя:

![](/images/layers_more.webp) 

#### Факторы каналов {#channel-factors}

Эти настройки позволяют масштабировать вклад скульпта/цвета/шероховатости/металличности/непрозрачности для слоя. Эти значения умножаются на общий фактор слоя, поэтому, например, если сила слоя равна 1, а фактор цветового канала — 0.5, то цвет будет отображаться с силой 0.5.

`Offset` управляет силой скульпта слоя. В то время как цвет/шероховатость/металличность ограничены диапазоном 0–1, offset может иметь любое значение, как положительное, так и отрицательное. 

::: tip
Offset можно использовать, чтобы превратить слой с буграми в слой с впадинами или, например, улыбку — в хмурое выражение:
![](/videos/layer_happysad.mp4)


Симметричный слой можно клонировать и затем разделить на левую/правую формы с помощью del layer:
![](/videos/layer_leftright.mp4)

Слои с отрицательным offset можно «запечь» в пустые слои, чтобы получить новые положительные формы.

Слои с положительным offset больше 1 можно использовать для экспериментов с более экстремальными blendshape.
:::

::: warning
В данный момент слои используют один общий канал непрозрачности для всех трёх каналов (цвет/металличность/шероховатость).
Если объединять несколько слоёв с по‑канальной интенсивностью, отличной от 100%, итоговый результат может отличаться от ожидаемого.

Возможно, в будущем у каждого канала появится собственный альфа‑канал, чтобы убрать это ограничение.
:::


#### ![](/icons/tool_mask.webp) Маска {#mask}
Кнопка маски рядом с каждым ползунком создаёт маску из соответствующего канала. Аналогично использованию слоёв для выделений в графических редакторах, это позволяет переиспользовать работу, проделанную в слое, для других операций.

#### ![](/icons/preview.webp) Предпросмотр {#preview}
![](/images/layers_preview.webp) 

При включении показывает предпросмотр настроек извлечения для этого слоя (см. следующий раздел).

Когда включён xray, только извлечённая форма будет отображаться как сплошная, остальная часть формы станет прозрачной — это полезно, если вы используете отрицательную высоту извлечения.

#### Извлечь {#extract}
![](/images/layers_extract.webp) 

![](/videos/layer_shell.mp4)

Кнопка `Extract` дублирует содержимое слоя в новый объект, обычно с заданной пользователем толщиной, указанной в следующем разделе.

`Closing action` определяет, как выполняется дублирование:

* None — просто извлечь часть, не создавать боковые стенки и не заполнять отверстия.
* Fill — отверстие заполняется и сглаживается треугольниками. Не используйте этот вариант для плоских поверхностей.
* Shell — замкнуть извлечённую форму с учётом значения толщины и направления.
* Layer — извлечь разницу слоя.

#### ![](/icons/height.webp) Толщина {#thickness}
![](/images/layers_thickness.webp) 

Глубина экструзии оболочки. Положительные значения растут наружу от поверхности, отрицательные — внутрь.

Кнопки плюс/минус рядом с этим значением задают направление экструзии:
* Minus ( - ) — начинать от текущей поверхности и выдавливать вниз. 
* Plus ( + ) — начинать от текущей поверхности и выдавливать вверх.
* PlusMinus ( ± ) — отодвигать верх и низ экструзии на равные расстояния, так что она будет наполовину утоплена в исходную поверхность.

#### Плавность {#smoothness}
![](/images/layers_smoothness.webp) 

Если края области, подлежащей извлечению, неровные, этот ползунок попытается размыть край до более плавной формы. 

#### ![](/icons/height.webp) Крайний цикл (боковой) {#edge-loop-side}
![](/images/layers_edgeloop.webp) 

Этот раздел виден, когда в качестве closing action выбран «Shell». 

`Auto Edge-loop (side)` вычисляет количество эджлупов вдоль боковых стенок оболочки, чтобы получить квадратные полигоны. 

Если опция отключена, ползунок `Division` задаёт количество делений по бокам.

_На этом подменю «More...» заканчивается._

### Расширенные {#advanced}
![](/images/layers_advanced.webp)

#### Сохранить детали верхних слоёв {#keep-top-layers-details}

Гарантирует, что мелкие детали на верхних слоях останутся видимыми, когда на нижних слоях выполняются крупные изменения.

По умолчанию, если вы вылепили мелкие морщины на слое, а затем внесли крупные изменения в базовый слой, морщины будут потеряны. Включение этого переключателя позволяет мелким деталям всегда «плавать» над крупными изменениями снизу. В следующем видео видно, как детализация морщин пропадает по умолчанию, но остаётся видимой, когда включена опция «keep top layers details»:

![](/videos/layers_details.mp4)


#### UI: Развернуть список {#ui-expand-list}

В стандартном меню слоёв можно переключать видимость слоя и его непрозрачность. Включение этой опции разворачивает полный набор контролов для каждого слоя.

![](/images/layers_expand.webp)

#### Синхронизировать трансформацию {#sync-transform}

Если включено, все невыбранные слои будут скорректированы в зависимости от трансформации (поворот, масштаб, скос). 

Отключите эту опцию, если остальные слои должны использоваться без новой трансформации, которую вы применяете.

В режиме `Auto` будут корректироваться только видимые слои.