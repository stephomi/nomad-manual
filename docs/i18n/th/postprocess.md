# ![](/icons/postprocess.webp) โพสต์โปรเซส {#post-process}

เมนูนี้ควบคุมหลายส่วนของ Nomad เพื่อปรับลุคของภาพเรนเดอร์

![](/images/postprocess_overview_drac.webp)

การใช้โพสต์โปรเซสสามารถเปลี่ยนลุคสุดท้ายของซีนได้อย่างมาก

![](/images/postprocess_overview.webp)
*ซีนเดียวกันก่อนและหลังใช้โพสต์โปรเซส โดยไม่มีการเพิ่มไฟหรือเปลี่ยนวัสดุใดๆ เพิ่มเติม*

โพสต์โปรเซสอาจส่งผลกระทบต่อประสิทธิภาพได้มาก ขึ้นอยู่กับอุปกรณ์ของคุณ  
มีเช็กบ็อกซ์รวมเพื่อปิดโพสต์โปรเซสทั้งหมด เพื่อให้คุณกลับไปปั้น/โมเดลได้อย่างรวดเร็วโดยไม่สูญค่า preset  
สำหรับการเรนเดอร์แบบ PBR ควรเปิดใช้ [Ambient Occlusion](#ambient-occlusion-ssao), [Reflection](#reflection-ssr) และ [Tone Mapping](#tone-mapping)

อย่างไรก็ตาม ส่วนใหญ่แล้วคุณจะต้องการปิดโพสต์โปรเซสขณะปั้น เพื่อโฟกัสที่รูปทรงของโมเดลเป็นหลัก


## คุณภาพ {#quality}

![](/images/postprocess_quality.webp)
### การสุ่มเฟรมสูงสุด {#max-frame-sampling}
Nomad จะคำนวณโพสต์โปรเซสจำนวนหนึ่งสำหรับการเรนเดอร์เฟรมเดียว ซึ่งอาจดูมีนอยส์ ตัวควบคุมนี้กำหนดว่าจะเรนเดอร์กี่เฟรมแล้วนำมาผสมกันเพื่อลดอาร์ติแฟกต์จากนอยส์ เอฟเฟกต์บางอย่างไม่ต้องการตัวอย่างเพิ่ม (เช่น color grading) ในขณะที่เอฟเฟกต์อื่นอย่าง global illumination อาจต้องใช้ตัวอย่างหลายร้อยครั้งเพื่อให้ปราศจากนอยส์

ใน viewport จะเห็นได้เมื่อปล่อยให้ Nomad ทำงานเอง คุณภาพภาพจะค่อยๆ ดีขึ้นจนถึงจำนวนตัวอย่างสูงสุดแล้วหยุด จำนวนการคำนวณนี้ยังถูกใช้ในส่วนเรนเดอร์ของ [เมนู Files](files) เมื่อกด 'export png'

### ตัวคูณความละเอียด {#resolution-multiplier}
สไลเดอร์นี้ควบคุมความละเอียดของโพสต์โปรเซส ค่า x1.0 หมายถึงเรนเดอร์ที่ความละเอียดพิกเซลของอุปกรณ์ ค่า x0.5 จะเรนเดอร์ที่ครึ่งหนึ่งของความละเอียด ซึ่งเร็วแต่คุณภาพต่ำกว่า ค่าเกิน 1 จะเรนเดอร์ที่ขนาดใหญ่กว่าแล้วค่อยย่อกลับ ส่งผลให้คุณภาพสูงขึ้น นอยส์น้อยลง แต่ใช้เวลาเรนเดอร์นานขึ้น

### ตัวอย่างสูงสุด {#max-samples}

จะเพิ่มคุณภาพของโพสต์โปรเซส แต่โดยทั่วไป `Full resolution` จะมีผลมากกว่า 

### ตัวลดนอยส์ (oidn) {#oidn}

ใช้ตัวลดนอยส์กับภาพ ช่วยให้คุณใช้จำนวนตัวอย่างที่ต่ำลงได้มาก ฟีเจอร์นี้ทำงานได้เฉพาะเมื่อเปิด `Full Resolution` หมายเหตุ: การลดนอยส์จะเกิดขึ้นหลังจากคำนวณตัวอย่างทั้งหมดแล้ว และอาจใช้พลังประมวลผลสูง

## เบราว์เซอร์พรีเซ็ต {#preset-browser}
![](/images/postprocess_presets.webp)
การคลิกที่รูปภาพจะเปิดชุด preset ของโพสต์โปรเซสขึ้นมา หากต้องการสร้าง preset ของคุณเอง ให้เลือกหนึ่งอัน กด 'clone' แล้วแก้ไข เมื่อต้องการบันทึก ให้คลิกรูป preset อีกครั้งใน preset browser แล้วเลือก 'save'


## สะท้อน (SSR) {#reflection-ssr}
ด้วยตัวเลือกนี้ วัตถุสามารถสะท้อนวัตถุอื่นในซีนได้ ตราบใดที่วัตถุนั้นมองเห็นได้บนหน้าจอ  
หากคุณมีวัตถุโลหะและผิวมันในซีน ก็ควรเปิดใช้ตัวเลือกนี้  
ตัวเลือกนี้มีผลเฉพาะในโหมด PBR

| SSR off                    | SSR on                    |
| :------------------------: | :-----------------------: |
| ![](/images/ssr_off.webp) | ![](/images/ssr_on.webp) |

## แสงทางอ้อมทั่วโลก (SSGI) {#global-illumination-ssgi}

Global illumination จำลองการเด้งของแสงระหว่างพื้นผิว เช่น กำแพงสีแดงจะสะท้อนสีแดงไปยังวัตถุสีขาวที่อยู่ใกล้ๆ สิ่งนี้ช่วยเพิ่มความสมจริงของเรนเดอร์ได้มากเมื่อใช้ร่วมกับ ambient occlusion และ reflections 

`Strength` - ความเข้มของ global illumination 



| SSGI off                   | SSGI on                   |
| :------------------------: | :-----------------------: |
| ![](/images/ssgi_off.webp) | ![](/images/ssgi_on.webp) |

_มีสปอตไลต์อยู่ด้านหลังทรงกลม เล็งไปที่เพดาน เมื่อปิด SSGI จะมีเพียงเพดานที่สว่าง เมื่อเปิด SSGI แสงจะเด้งจากเพดานไปยังผนังแล้วมาถึงทรงกลม_

## แอมเบียนต์ออคลูชัน (SSAO) {#ambient-occlusion-ssao}
Ambient occlusion จะทำให้บริเวณที่แสงเข้าถึงได้น้อย (เช่น มุมต่างๆ) มืดลง  
เอฟเฟกต์นี้ขึ้นอยู่กับเรขาคณิตของโมเดลเท่านั้น

* `Strength`- ความเข้มของเอฟเฟกต์
* `Size`- ระยะการกระจายของเอฟเฟกต์
* `Curvature bias` - ความไวของเอฟเฟกต์ต่อการเปลี่ยนแปลงของพื้นผิว
* `Color` - สีที่นำมาคูณกับ occlusion ใช้เพื่อสร้างเอฟเฟกต์เชิงสร้างสรรค์


| SSAO off                    | SSAO on                    |
| :-------------------------: | :------------------------: |
| ![](/images/ssao_off.webp) | ![](/images/ssao_on.webp) |

::: tip
AO จะมองเห็นได้ชัดที่สุดในบริเวณที่สว่างจากแสงสภาพแวดล้อมเป็นหลัก พื้นที่ที่ได้รับแสงตรงแรงๆ จะมีเอฟเฟกต์ AO อ่อนลงมาก

:::

## ระยะชัดลึก (DOF) {#depth-of-field-dof}
เพิ่มเอฟเฟกต์เบลอในบริเวณที่อยู่นอกจุดโฟกัส

เพียงแตะที่โมเดลของคุณเพื่อเปลี่ยนจุดโฟกัส

* `Far blur` - ปริมาณการเบลอที่ใช้กับด้านหลังจุดโฟกัส
* `Near blur` - ปริมาณการเบลอที่ใช้ระหว่างจุดโฟกัสกับกล้อง


| DOF off                   | DOF focus on far ring       | DOF focus on close ring    |
| :-----------------------: | :-------------------------: | :------------------------: |
| ![](/images/dof_off.webp) | ![](/images/dof_near.webp) | ![](/images/dof_far.webp) |


## บลูม {#bloom}
Bloom จะทำให้บริเวณที่สว่างในซีนของคุณเรืองแสง

* `Intensity` - ความแรงของเอฟเฟกต์
* `Radius` - ระยะการกระจายของเอฟเฟกต์
* `Threshold` - ความสว่างขั้นต่ำของพิกเซลในซีนก่อนที่จะเริ่มเกิด bloom หากตั้งค่าต่ำ ทุกอย่างจะมี bloom หากตั้งค่าสูง จะมีเพียงพิกเซลที่สว่างที่สุดเท่านั้นที่มี bloom
* `Color` - สีทินต์ที่สามารถเพิ่มเข้าไปใน bloom เพื่อเอฟเฟกต์เชิงสร้างสรรค์

| Bloom off                    | Bloom with radius 0         | Bloom with radius 1         |
| :--------------------------: | :-------------------------: | :-------------------------: |
| ![](/images/bloom_off.webp) | ![](/images/bloom_r0.webp) | ![](/images/bloom_r1.webp) |


## โทนแมปปิง {#tone-mapping}
Tone Mapping คือการแมปค่า HDR ให้มาอยู่ในช่วง `[0, 1]`  
หากคุณไม่ใช้ (หรือเลือก `none`) คอมโพเนนต์สีใดๆ ที่มากกว่า 1 จะถูกตัดทิ้ง  
ความแตกต่างของสีที่อยู่เหนือช่วงนี้จะหายไป

* `None/Neutral/Agx/ACES` - เลือกตัว tone mapper ที่จะใช้ `None` จะไม่ทำการ remap (แต่ตัวควบคุมอื่นยังทำงาน) ตัวเลือกอื่นๆ คล้ายกับการเลือกฟิล์มคนละชนิด ซึ่งจะจัดการกับค่าสว่างเกินและสีต่างกันออกไป นี่เป็นหัวข้อที่ลึกมาก ลองค้นหา tone mapping, Agx, ACES เพื่อข้อมูลเพิ่มเติม
* `Exposure` - ความสว่างรวมของภาพ คล้ายการปรับรูรับแสงของกล้อง เป็นวิธีที่รวดเร็วในการทำให้ภาพสว่างหรือมืดลงทั้งภาพ
* `Saturation` - ความเข้มของสี ค่า 1 คือปกติ 0 คือขาวดำ ค่ามากกว่า 1 จะยิ่งอิ่มสีมากขึ้น
* `Contrast` - ทำให้ส่วนมืดมืดขึ้นและส่วนสว่างสว่างขึ้น ใช้อย่างระมัดระวัง เพราะอาจทำให้เกิดอาร์ติแฟกต์เมื่อใช้ค่าสูง

สังเกตว่าเมื่อปิด `Tone Mapping` รายละเอียดบางส่วนจะหายไปเพราะพิกเซลสว่างเกินไป

| Tone Mapping off            | Tone Mapping on            |
| :-------------------------: | :------------------------: |
| ![](/images/tone_off.webp) | ![](/images/tone_on.webp) |

::: tip
Tone mapping สามารถช่วยขับเน้นเอฟเฟกต์ global illumination ได้ หากคุณลดความเข้มของ environment map ลง เพิ่มความสว่างของแหล่งกำเนิดแสงหลัก แล้วเพิ่มค่า `exposure` ของ tone mapping คุณจะเห็นเอฟเฟกต์แสงสะท้อน (bounce light) ชัดขึ้น
:::

## การเกรดสี {#color-grading}
คล้ายกับเครื่องมือ curves ใน Photoshop ช่วยให้คุณควบคุมสมดุลและการกระจายของสีในภาพ ตัวควบคุม `main` มีผลต่อสมดุลสีทั้งหมด ส่วน `red`/`green`/`blue` ใช้ปรับละเอียดในแต่ละช่องสี 

| Color Grading off             | Color Grading on             |
| :---------------------------: | :--------------------------: |
| ![](/images/grading_off.webp) | ![](/images/grading_on.webp) |

## ความโค้ง {#curvature}
ตรวจจับบริเวณที่มีการเปลี่ยนแปลงความโค้งอย่างรวดเร็ว แล้วใส่สีลงในบริเวณเหล่านั้น

* `Factor` - ความเข้มรวมของเอฟเฟกต์
* `Bump` - ระดับการตรวจจับส่วนโค้งนูน (convex) ที่คม และใส่สีที่เลือกลงไป (ค่าเริ่มต้นคือสีขาว)
* `Cavity` - ระดับการตรวจจับส่วนโค้งเว้า (concave) และใส่สีที่เลือกลงไป (ค่าเริ่มต้นคือสีดำ)


| Curvature off                    | Curvature on                   |
| :------------------------------: | :----------------------------: |
| ![](/images/curvature_off.webp) | ![](/images/curvature_on.webp) |


## ความคลาดสี {#chromatic-aberration}
จำลองอาร์ติแฟกต์ของเลนส์จากการแยกตัวของแสงบริเวณขอบหน้าจอ

* `Strength` - ระดับที่ส่วนสีแดง/เขียว/น้ำเงินของภาพถูกแยกออกไปทางขอบหน้าจอ

| Chromatic off                 | Chromatic on                 |
| :---------------------------: | :--------------------------: |
| ![](/images/chroma_off.webp) | ![](/images/chroma_on.webp) |


## วิกเน็ต {#vignette}
จำลองอาร์ติแฟกต์ของเลนส์ด้วยการทำให้ขอบหน้าจอมืดลง

* `Size` - ขนาดของวงรีกลับด้านที่วางทับบนภาพ
* `Hardness` - ความเบลอหรือความคมของขอบวงรีที่นำมาผสมกับภาพ


| Vignette off                    | Vignette on                    |
| :-----------------------------: | :----------------------------: |
| ![](/images/vignette_off.webp) | ![](/images/vignette_on.webp) |

## เกรน {#grain}
เพิ่มเอฟเฟกต์เกรน ช่วยให้ภาพดูไม่เป็นดิจิทัลเกินไป

* `Strength` - ปริมาณเกรน/นอยส์ที่เพิ่มเข้าไปในภาพ


| Grain off                    | Grain on                   |
| :--------------------------: | :------------------------: |
| ![](/images/grain_off.webp) | ![](/images/grain_on.webp) |


## ความคมชัด {#sharpness}
เอฟเฟกต์เพิ่มความคม คล้ายกับใน Photoshop หรือแอปแต่งภาพ

* `Strength` - ปริมาณการเพิ่มความคมที่ใช้กับภาพ


| Sharpness off                  | Sharpness on                 |
| :----------------------------: | :--------------------------: |
| ![](/images/sharpen_off.webp) | ![](/images/sharpen_on.webp) |

## พิกเซลอาร์ต {#pixel-art}
จำลองงานพิกเซลอาร์ตแบบเกมยุคเก่า

* `Slider` - ขนาดของพิกเซล
* `Allow frame sampling` - หากคุณพบพิกเซลดำจำนวนมาก ลองเปิดตัวเลือกนี้ ซึ่งจะเขียนทับการ sampling ค่าเริ่มต้น

| Pixel off                   | Pixel on                   |
| :-------------------------: | :------------------------: |
| ![](/images/pixel_off.webp) | ![](/images/pixel_on.webp) |

## สแกนไลน์ {#scanline}
จำลองลุคของจอมอนิเตอร์ CRT แบบเก่า

* `Factor` - ความแรงของเส้น
* `Spacing` - ขนาดของเส้น

| Scanline off                   | Scanline on                   |
| :----------------------------: | :---------------------------: |
| ![](/images/scanline_off.webp) | ![](/images/scanline_on.webp) |


## ดิเธอริง {#dithering}

ทำ dithering พิกเซลเพื่อลดอาร์ติแฟกต์แบบแถบสี (banding) โดยปกติควรเปิดใช้ แต่สามารถปิดได้สำหรับงานเฉพาะ (เช่น การส่งออก depth map หรือการประมวลผลข้อมูลเฉพาะอื่นๆ)