# ![](/icons/sun.webp) การแรเงา {#shading}

เมนูนี้ใช้ควบคุมโหมดการแรเงาที่ Nomad ใช้, คุณสมบัติของแสง, และคุณสมบัติของแสงสภาพแวดล้อม/แมตแคป

![](/images/shading_overview.webp)



คุณสามารถเลือกโหมดการเรนเดอร์ได้หลายแบบ:

| Mode                        | ความหมาย                       | คำอธิบาย                                                       |
| :-------------------------: | :----------------------------: | :-------------------------------------------------------------: |
| [Lit(PBR)](#pbr)            | Physically Based Rendering     | การเพนต์ด้วย metalness/roughness                               |
| [Matcap](#matcap)           | Material Capture               | ใช้ระหว่างการปั้น ใช้ gpu/cpu น้อยกว่า PBR                    |
| [Unlit](#unlit)             | Surface Color                  | แสดงเฉพาะสีผิวหน้า ไม่มีการแรเงาหรือแสงใด ๆ                   |
| [Object Id](#object-id)      | Object ID                      | สีสุ่มต่อหนึ่งอ็อบเจ็กต์ มีประโยชน์สำหรับงานเพนต์ในโปรแกรมอื่น |
| [Instance Id](#instance-id)  | Instance ID                    | สีสุ่มต่อหนึ่งอินสแตนซ์ ใช้ระบุเมชที่แชร์กันได้               |

หากต้องการเรียนรู้เพิ่มเติมเกี่ยวกับ metalness และ roughness ดูหัวข้อ [Vertex Paint](painting.md)

---

![](/images/shading_second.webp)

### กลุ่มหน้า {#face-group}
ซ้อนทับสีของ facegroup บนโมเดล Facegroup คือการเลือกกลุ่มโพลิกอนที่มีสี ซึ่งสามารถสร้างได้ด้วยเครื่องมือ [Face group](tools#facegroup) และจะถูกสร้างให้อัตโนมัติในพรีมิทีฟส่วนใหญ่

เครื่องมือบางอย่างจะกรองการทำงานตาม facegroup โดยอัตโนมัติเมื่อมีการแสดง facegroup อยู่

### แสดงการเพนต์ {#show-paint}
Nomad สามารถเก็บข้อมูลสี, roughness, metalness ไว้ในเวอร์เท็กซ์ของงานปั้นของคุณได้ คุณสามารถสลับการแสดงผลคุณสมบัติเหล่านี้แบบรวม ๆ ได้ด้วยเช็กบ็อกซ์นี้

โปรดทราบว่า หากคุณมีทั้งคุณสมบัติของเวอร์เท็กซ์และเท็กซ์เจอร์ และเปิดใช้งานทั้งคู่ ค่าเหล่านี้จะถูกคูณรวมกัน

### แสดงมาสก์ {#show-mask}
สลับการแสดง overlay มาสก์ระดับสีเทาของ [mask tools](tools#mask) เมื่อปิดตัวเลือกนี้ มาสก์จะถูกปิดการทำงานด้วย ซึ่งมีประโยชน์หากต้องการแก้ไขอย่างรวดเร็วโดยไม่ใช้มาสก์ แล้วค่อยเปิดกลับมาใหม่โดยที่มาสก์เดิมยังอยู่

### ใช้ซ่อน {#use-hide}

สลับการแสดง/ซ่อนหน้าโพลิกอนที่ถูกซ่อนไว้ โปรดทราบว่าทำงานได้เฉพาะเมื่อคุณไม่ได้อยู่ในเครื่องมือ hide!

### ใช้เท็กซ์เจอร์ {#use-textures}

Nomad อนุญาตให้กำหนดเท็กซ์เจอร์ให้กับอ็อบเจ็กต์จากเมนู [material](material) หากมีการกำหนดเท็กซ์เจอร์ไว้ สามารถสลับเปิด/ปิดทั้งหมดได้ด้วยเช็กบ็อกซ์นี้







### ภาพรวม PBR และแสง {#pbr}

คู่มือนี้จะไม่ลงลึกในรายละเอียดของ Physically Based Rendering

สิ่งสำคัญที่ต้องจำไว้คือ แสงและวัสดุถูกแยกออกจากกันอย่างสมบูรณ์  
หมายความว่าคุณสามารถเพนต์สี, roughness และ metalness ของอ็อบเจ็กต์ได้ ในขณะที่ระบบไฟจะถูกจัดการแยกต่างหาก  
สิ่งนี้ช่วยให้คุณเพนต์อ็อบเจ็กต์ให้เสร็จ แล้วค่อยไปปรับแสงทีหลังได้ โดยไม่ทำให้ลุคโดยรวมของโมเดลเสีย

ไฟจะใช้ได้เฉพาะใน [โหมด PBR](#pbr) เท่านั้น  
เพื่อเหตุผลด้านประสิทธิภาพ คุณจำกัดได้สูงสุด 4 ดวง

::: tip
คุณสามารถโหลดไฟล์ glTF ที่มีไฟมากกว่า 4 ดวงได้ และ Nomad จะเก็บไฟทั้งหมดไว้  
อย่างไรก็ตาม ประสิทธิภาพอาจจะไม่ดีนัก
:::

::: tip
คุณสามารถ “หลอก” ให้เหมือนมีไฟหลายดวงได้โดยทำให้อ็อบเจ็กต์เป็น unlit/emissive แล้วเปิด global illumination ในเมนู [post process](postprocess)
:::

### ภาพรวมประเภทแสง {#light-types-overview}

นี่คือประเภทของไฟที่รองรับในตอนนี้:

| Mode                        | คำอธิบาย                                              | สามารถสร้างเงาได้หรือไม่                                  |
| :-------------------------: | :---------------------------------------------------: | :--------------------------------------------------------: |
| [Directional](#directional) | แสงอาทิตย์ที่อยู่ไกลอนันต์                          | ได้                                                        |
| [Environment](#environment) | แสงระยะไกลที่จับคู่กับแสงจาก Environment HDR        | ได้                                                        |
| [Spot](#spot)               | ไฟทรงกรวย                                            | ได้                                                        |
| [Point](#point)             | แสงจุดแบบกระจายทุกทิศทาง                            | ได้ แต่ผ่าน screen-space shadows ที่ไม่เสถียรเท่า shadow map |

#### ทิศทาง (Directional) {#directional}
ปล่อยแสงมาจากระยะไกลอนันต์ ด้วยความเข้มคงที่  
ตำแหน่ง 3 มิติในซีนไม่สำคัญ มีเพียงทิศทางของมันเท่านั้นที่สำคัญ

คุณสามารถผูกไฟดวงนี้เข้ากับกล้องได้ เพื่อให้ได้แสงที่คงที่  
เช่น ใช้ทำ rim light (ไฟแรง ๆ ที่ส่องมาจากด้านหลังโมเดลไปยังกล้อง) ที่จะส่องด้านหลังโมเดลตลอดเวลา

#### แสงสภาพแวดล้อม {#env-light}
การใช้ [environment hdr](#environment) เหมาะสำหรับแสงนุ่ม ๆ โดยรวม แต่ถ้าใน HDR มีแหล่งกำเนิดแสงที่คมและสว่างมาก เงาที่เกิดจากมันจะนุ่มมาก จนบางครั้งแทบมองไม่เห็น การใช้ไฟ directional ร่วมกับ environment HDR จะช่วยได้ แต่การจัดให้ตรงกันอาจทำได้ยาก

ไฟประเภทนี้จะทำงานแทนคุณ ไฟจะหมุนอัตโนมัติเพื่อให้ตรงกับส่วนที่สว่างที่สุดของ HDR จากนั้นคุณสามารถควบคุมความเข้มและมุม (ความนุ่มของเงา) แยกจากกันได้

#### สปอตไลต์ {#spot}
ไฟสปอตจะปล่อยแสงไปในทิศทางเดียว โดยถูกจำกัดด้วยทรงกรวย

#### แสงจุด (Point) {#point}
ไฟจุดจะปล่อยแสงออกทุกทิศทาง  
ในตอนนี้ ไฟจุดยังไม่รองรับเงา

#### เงา {#shadows}
ตัวเลือก `normal bias` ใช้เพื่อลดอาร์ติแฟกต์ของเงาที่พบบ่อย (acne/peter-panning)

คุณภาพของเงาขึ้นอยู่กับขนาดของอ็อบเจ็กต์เมื่อเทียบกับทั้งซีน  
หากคุณมีอ็อบเจ็กต์ขนาดใหญ่ในซีนที่ไม่จำเป็นต้องสร้างเงา (เช่น plane ขนาดใหญ่) ให้ปิดการสร้างเงาใน [การตั้งค่าวัสดุ](material.md#cast-shadows)

## ไฟ {#lights}

![](/images/shading_lights.webp)

### ![](/icons/checked.webp) ช่องทำเครื่องหมายไฟ {#lights-checkbox}

สลับเปิด/ปิดไฟตรงทั้งหมดในซีน



### เพิ่มไฟ {#add-light}

เพิ่มไฟเข้าไปในซีน สูงสุดได้ 4 ดวง เมื่อเพิ่มไฟแล้ว รายการไฟจะถูกแสดงพร้อมปุ่มต่าง ๆ และจะมีทูลบาร์ของไฟเพิ่มที่ด้านบนของ viewport

![](/images/shading_lights_icons.webp)

* ข้อความจะแสดงชื่อไฟและความสว่าง
* ไอคอนรูปตาใช้สลับการมองเห็น
* ไอคอนดินสอใช้เปลี่ยนชื่อไฟ
* ไอคอนถังขยะใช้ลบไฟ
* ไอคอนคัดลอกใช้ทำสำเนาไฟ
* ไอคอนจุดสามจุดจะเปิดตัวแก้ไขไฟแบบเต็ม ฟังก์ชันส่วนใหญ่มีให้ใช้จากทูลบาร์ด้านบน viewport เช่นกัน

### ![](/icons/spotlight.webp) ไอคอน {#icons}

สลับการแสดงไอคอนไฟใน viewport

### แถบเครื่องมือไฟ {#light-toolbar}
![](/images/shading_lights_toolbar.webp) 

ทูลบาร์นี้จะปรากฏที่ด้านบนของ viewport เมื่อมีการเลือกไฟ

* Show ใช้สลับการมองเห็นของไฟ
* Directional/Environment/Spot/Point ใช้เปลี่ยนประเภทของไฟ แตะเพื่อวน หรือกดค้างเพื่อเปิดเมนู
* Intensity ควบคุมความแรงของไฟ ค่าอาจมากกว่า 1.0 ได้สำหรับไฟที่สว่างมาก ซึ่งมีประโยชน์เมื่อใช้ร่วมกับ Global Illumination ใน Post Process
* การคลิกที่ช่องสีจะเปิดตัวเลือกสี Nomad มีหลายวิธีในการเลือกสี ตัวควบคุมแบบ Kelvin ให้วิธีเลือกโทนร้อน/เย็นที่เป็นธรรมชาติ
* Shadow ใช้สลับเงา
* Size กำหนดความกว้างของไฟ ไฟที่กว้างขึ้นจะให้เงานุ่ม แสงนุ่ม และไฮไลต์บนอ็อบเจ็กต์ที่นุ่มขึ้น
* ... จะเปิดตัวควบคุมเพิ่มเติม

### ตัวควบคุมไฟเพิ่มเติม {#light-extra-controls}

![](/images/shading_extra_controls.webp) 

โปรดทราบว่าบางตัวเลือกใช้ได้เฉพาะกับไฟบางประเภทเท่านั้น

* `Clone` ทำสำเนาไฟ
* `Recenter` ย้ายไฟกลับไปที่จุดกำเนิด
* `Delete` ลบไฟ
* `Directional/Environment/Spot/Point` ใช้เปลี่ยนประเภทของไฟ
* เมื่อคลิกที่ `colour swatch` จะเปิดตัวเลือกสี
* `Intensity` ควบคุมความแรงของไฟ
* `Attachment` (_เฉพาะ directional_) ตั้งค่าให้ไฟผูกกับ world หรือผูกกับกล้อง เช่น หากคุณใช้ไฟ directional ด้านหลังตัวละครเป็น rim light เมื่อเลือก attachment เป็น camera การหมุนกล้องจะทำให้ไฟอยู่ด้านหลังตัวละครเสมอ
* `Angle` (_เฉพาะ directional และ environment_) คือขนาดปรากฏของไฟ เปรียบได้กับขนาดของดวงอาทิตย์บนท้องฟ้า มุมที่ใหญ่ขึ้นจะให้เงานุ่มขึ้นและไฮไลต์กว้างขึ้น
* `Softness` (_เฉพาะ spotlight_) ควบคุมความคมของขอบกรวยไฟสปอต ค่า 0 คือขอบคมมาก ค่า 1 คือนุ่มมาก มีเกรเดียนต์ไปยังศูนย์กลางของกรวยไฟ ใน viewport จุดสีน้ำเงินเล็ก ๆ บนกรวยไฟสปอตใช้ปรับ softness แบบอินเทอร์แอคทีฟได้
* `Cone angle` (_เฉพาะ spotlight_) ควบคุมมุมกระจายของไฟสปอต มุมเล็กคือแสงลำแคบมาก ค่า 170 คือแสงกระจายกว้างมาก ใน viewport จุดสีส้มใช้ปรับ cone angle แบบอินเทอร์แอคทีฟได้
* `Shadow` สลับเงาสำหรับไฟดวงปัจจุบัน
* `Shadow map` และ `screenspace` คือวิธีคำนวณเงาที่ต่างกัน โดยทั่วไป shadow map จะเสถียรกว่า
* `Contact` ปรับวิธีคำนวณเงา เงาเป็นปัญหาที่ยากในกราฟิกคอมพิวเตอร์ และอาจทำให้เกิดอาร์ติแฟกต์ในการเรนเดอร์ได้ สามารถเลือกเงาที่แม่นยำขึ้นสำหรับไฟที่สำคัญที่สุดในซีน ตัวเลือกนี้กำหนดว่าจะให้ Nomad เลือกไฟที่สำคัญที่สุดอัตโนมัติ หรือให้ผู้ใช้เลือกเอง
* `Tolerance` หากเห็นอาร์ติแฟกต์ของเงา (เช่น เงาไม่สัมผัสพื้นผิว หรือมี noise/ลายแปลก ๆ ในเงา) การปรับ tolerance สามารถช่วยแก้ปัญหาเหล่านี้ได้


## สภาพแวดล้อม {#environment}

![](/images/shading_environment.webp)

ในโลกจริง แสงมาจากทุกทิศทาง; สีฟ้าของท้องฟ้า สีเขียวของหญ้า สีแดงของอาคาร แสงทั้งหมดจาก “สภาพแวดล้อม” เหล่านี้สามารถจำลองได้ด้วย environment map

Nomad มาพร้อม environment map ตัวอย่างหลายแบบ ทั้งในร่มและกลางแจ้ง ด้วยโทนสีและระดับความสว่างที่ต่างกัน ลองใช้หลาย ๆ แผนที่เพื่อดูว่าอันไหนดึงรายละเอียดของงานปั้นคุณออกมาได้ดีที่สุด

แตะที่ภาพเพื่อดู environment map ที่มีอยู่ จากไดอะล็อกนั้นเลือก 'Import...' เพื่อโหลดของคุณเอง ควรใช้ภาพ High Dynamic Range (HDR) ในรูปแบบ latlong หรือ equirectangular เป็นไฟล์ .hdr หรือ .exr เว็บไซต์ [www.polyhaven.com](https://polyhaven.com/hdris) มีคลัง environment map ฟรีที่ดีให้ใช้ โดยทั่วไปแผนที่ hdr ขนาด 1k เป็นขนาดที่เหมาะสมและคุณภาพดี

### การรับแสง (Exposure) {#env-exposure}
ปรับความสว่างของ environment map มักจะพบว่าแผนที่เหล่านี้สว่างเกินไปเมื่อใช้ร่วมกับไฟปกติ การลดค่า exposure จะช่วยบาลานซ์ โดยเฉพาะเมื่อใช้ร่วมกับ Global Illumination ในการตั้งค่า [Post Process](postprocess)

### การหมุน {#env-rotation}

เนื่องจาก environment map จับแสงจากทุกทิศทาง คุณจึงสามารถหมุนมันเพื่อให้การสะท้อนและแสงโดยรวมเข้ากับงานปั้นของคุณได้ดีขึ้น

### แนบกับกล้อง {#env-attached}
ผูก environment เข้ากับกล้อง

จะบังคับให้แสงคงที่ ซึ่งมีประโยชน์ระหว่างการปั้น


## ![](/icons/sphere_smooth.webp) Matcap {#matcap}

![](/images/shading_matcap.webp)

ตามชื่อ (MATerial CAPture) matcap จะดูแลทั้งข้อมูลแสงและวัสดุในภาพเดียว  
เนื่องจากวัสดุถูกฝังอยู่ใน matcap แล้ว ช่องเพนต์ roughness และ metalness จะถูกละเลย  
สีเพนต์จะถูกคูณกับ matcap หมายความว่าถ้าคุณใช้ matcap สีดำ/เทา การใช้สีขาวเพนต์ก็จะไม่ทำให้ภาพสว่างขึ้น

ศิลปินมักชอบโหมดนี้สำหรับการปั้น เพราะช่วยให้โฟกัสกับรูปทรงและเรขาคณิตของโมเดลได้ดี

การแตะที่ทรงกลมจะเปิดตัวเลือกภาพให้เลือก คุณยังสามารถเพิ่ม matcap ของคุณเองได้ โดยทั่วไปภาพถ่าย เรนเดอร์ หรือแม้แต่ภาพวาดของทรงกลมที่ครอปเป็นสี่เหลี่ยมจัตุรัสแน่น ๆ ก็ใช้ได้ มีไลบรารี matcap ออนไลน์มากมาย แหล่งที่มีประโยชน์คือ [nidorx matcap library](https://github.com/nidorx/matcaps)

### ใช้ Matcap ส่วนกลาง {#matcap-global}

โดยปกติศิลปินจะใช้ matcap เดียวกับทั้งงานปั้น แต่หากปิดสวิตช์นี้ แต่ละอ็อบเจ็กต์จะมี matcap ของตัวเองได้ สามารถใช้เชิงศิลป์เพื่อให้ได้ผลลัพธ์ที่โดดเด่น

::: tip
ปิดตัวเลือกนี้ แล้วใช้ภาพลูกตาเป็น matcap สำหรับดวงตาของตัวละครคุณ!
:::

### การหมุน {#matcap-rotation}
Matcap เป็นรูปแบบเฉพาะของ environment map ดังนั้นจึงสามารถหมุนได้เช่นเดียวกัน คุณยังสามารถหมุนได้ตลอดเวลาใน viewport โดยลากนิ้ว 3 นิ้วไปทางซ้ายและขวา



## ![](/icons/circle_fill.webp) ไม่มีแสงเงา (Unlit) {#unlit}

โหมดนี้จะแสดงเฉพาะสีผิวหน้าเท่านั้น มีประโยชน์สำหรับตรวจสอบว่าสีผิวหน้าของอ็อบเจ็กต์เป็นไปตามที่คุณต้องการ โดยไม่ถูกรบกวนจากแสง เงา การสะท้อน หรือความโปร่งใส

โหมดนี้ยังใช้สำหรับเรนเดอร์แบบไม่เน้นความสมจริง ให้ลุคแบน ๆ คล้ายการ์ตูนได้

## ![](/icons/cube.webp) Object ID {#object-id}

ข้อมูลแสงและพื้นผิวทั้งหมดจะถูกละเลย และแต่ละอ็อบเจ็กต์จะถูกแรเงาด้วยสีแบนที่ไม่ซ้ำกัน หากเรนเดอร์โหมดนี้คู่กับเรนเดอร์ PBR จะสามารถใช้ในโปรแกรมเพนต์เพื่อเลือกตามสี และทำ color correction เฉพาะอ็อบเจ็กต์ได้

โปรดทราบว่าสีเหล่านี้จะแสดงใน [มุมมอง tree view ของเมนู Scene](scene#tree-view) ด้วย

### สุ่ม id {#object-random}

สร้างชุดสีสุ่มใหม่

## ![](/icons/link.webp) Instance ID {#instance-id}

เหมือนกับ Object ID แต่ instance ที่ใช้เมชเดียวกันจะมีสีเดียวกัน

### สุ่ม id {#instance-random}

สร้างชุดสีสุ่มใหม่