# ![](/icons/scene.webp) 场景（Scene）

此菜单用于在 Nomad 中管理物体、灯光、相机和重复器。它以树状视图显示场景层级结构，你可以在其中修改物体的许多属性。你也可以在这里创建新物体，以及以多种方式合并和拆分物体。


![](/images/scene_menu_summary.webp)


## 快捷栏
| 操作                   | 图标                              | 说明                                                                                                              |
| :--------------------: | :-------------------------------: | :----------------------------------------------------------------------------------------------------------------: |
| [添加...](#add-menu)   | ![](/icons/plus.webp)            | 显示[添加菜单](#add-menu)，向场景中添加一个物体                                                                    |
| 删除                   | ![](/icons/trash.webp)           | 删除物体                                                                                                          |
| 锁定                   | ![](/icons/lock.webp)            | 使物体在视图中不可选，但仍可在树视图中选中                                                                          |
| 合并                   | ![](/icons/merge.webp)           | 将选中的多个物体合并为一个物体，不改变几何体                                                                       |
| 分离                   | ![](/icons/diagonal.webp)        | 如果一个物体由多个独立的多边形壳体组成，则将其拆分为多个物体。是合并操作的反向操作                                   |
| [布尔...](#boolean)    | ![](/icons/subtract_circle.webp) | 显示[布尔](#boolean)菜单                                                                                           |
| 克隆                   | ![](/icons/clone.webp)           | 将物体复制为一个新的独立物体                                                                                       |
| 实例                   | ![](/icons/link.webp)            | 将物体复制为实例，对其中一个实例的建模修改会同步到所有实例                                                          |
| 取消实例               | ![](/icons/unlink.webp)          | 将实例转换为独立形状，之后的建模修改将不再同步到其他实例                                                            |
| 同步                   | ![](/icons/link.webp)            | 如果实例有子物体，确保所有实例共享相同的子层级结构                                                                  |


## 树视图
![](/images/scene_treeview.webp) 

| 操作         | 图标                       | 说明                     |
| :----------: | :------------------------: | :----------------------: |
| 选择         | ![](/icons/checked.webp)  | 切换选中/未选中          |
| 可见         | ![](/icons/eye_open.webp) | 切换可见性               |
| 菜单         | ![](/icons/more.webp)     | 显示物体菜单             |

::: tip 提示：快速选择或隐藏多个物体

点按选择图标可切换单个物体，或在选择列上垂直拖动以选择多个物体。可见性列也可以用同样方式操作。

:::

### 树视图操作

在树视图中长按某一项直到其变为黄色。此时你可以在树中上下移动它，也可以将其拖到另一项上，使其成为该项的子物体。

当选中多个项目时，大部分会显示为深黄色，其中一个会是浅黄色。长按并拖动浅黄色的项目，可以一次性移动所有选中的物体。

当你选择一个父物体时，默认会同时选中其所有子物体。点按父物体图标可以在“仅选中父物体”和“选中父物体及其子物体”之间切换。

### 物体菜单

点击树视图中某个物体的省略号按钮（...）会显示该物体的菜单。  
其中许多选项与顶部快捷栏类似，为了方便而重复提供。

|       操作        |                        图标                        | 说明                                                                                                                                                             |
| :----------------: | :------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|       实例         |               ![](/icons/link.webp)            | 将物体复制为实例，对其中一个实例的建模修改会同步到所有实例                                                                                                       |
|       克隆         |              ![](/icons/clone.webp)            | 将物体复制为一个新的独立物体                                                                                                                                     |
|       重命名       |              ![](/icons/pencil.webp)           | 修改物体名称                                                                                                                                                     |
|       删除         |              ![](/icons/trash.webp)            | 删除物体                                                                                                                                                         |
|      删除+         |            ![](/icons/removeNode.webp)         | 删除物体及其所有子物体                                                                                                                                           |
|     取消实例       |              ![](/icons/unlink.webp)           | 将实例转换为独立形状，之后的建模修改将不再同步到其他实例                                                                                                         |
|   按拓扑分离       |             ![](/icons/separate.webp)          | 如果一个物体由多个独立的多边形壳体组成，则将其拆分为多个物体。是合并操作的反向操作。                                                                             |
| 按面组分离         |            ![](/icons/faceGroup.webp)          | 如果一个物体包含多个面组，则将网格按面组拆分为多个物体。                                                                                                         |
|   按图层分离       |              ![](/icons/layer.webp)            | 如果一个物体有多个图层，则将每个图层拆分为一个独立物体。对向其他应用程序导出混合变形（blendshape）很有用。                                                       |
|   合并 -> 图层     | ![](/icons/merge.webp) -> ![](/icons/layer.webp) <span style="visibility:hidden">_________</span> | 如果选中了多个拓扑结构相同的物体，会将这些物体合并为主物体的图层（其他物体会被删除）。同样适用于从其他应用导入的混合变形。<br><br> 注意：这些图层默认是禁用的。如果需要调整滑块，请先启用它们。 |




### 多选
你可以同时选择多个物体，以便实现以下两点：
- 使用变换工具（gizmo）一次移动多个物体
- 使用合并和布尔操作来合并物体

你可以勾选 `Multiselection` 复选框，然后在列表中点击物体进行多选。

::: tip 快速多选
你也可以在视图中按住 `Smooth` 快捷键并点按另一个网格来进行多选。

如果当前选中多个物体，再次点按某个物体可以取消选中该物体（前提是当前选中数量大于 1）。
:::

::: warning 变换工具功能受限
在多选模式下，变换工具会始终忽略遮罩（mask）。
同时，X/Y/Z 轴缩放功能会被移除。

原因是多选只支持整体网格变换，而不支持逐顶点变换。
未来可能会改进这一点。
:::


## 合并（Join）
此选项会将多个选中的物体合并为一个物体条目。

你可以在[分离](#separate)一节的视频中看到示例。

## 布尔（Boolean）
![](/images/scene_boolean_menu.webp) 
将多个物体组合为一个表面。

`Voxel merge`（体素合并）会保留物体的体积，并在表面重新生成均匀分布的多边形。由于包含计算步骤，体素合并可以处理复杂几何体，但如果目标分辨率不够高，可能会丢失细节。

`Boolean`（布尔）会尽量保留原有多边形布局，并在物体相交处缝合多边形。与体素合并相比，这通常能得到更干净、更锐利的结果，但要求网格是“封闭”的（watertight），不能有孔洞或畸形几何。如果布尔失败，通常体素合并仍然可以成功。

### 布尔运算类型
体素合并和布尔操作都会使用物体的可见性来控制运算类型：

#### 并集（Union）
两个物体都可见时会创建布尔**并集**，即将物体的外表皮合并为一个整体，不保留内部表面。![](/images/boolean_union.webp)

#### 差集（Subtract）
一个物体不可见时 = 布尔**差集**，不可见物体会从可见物体中被减去。![](/images/boolean_subtract.webp)

#### 交集（Intersect）
两个物体都不可见时 = 布尔**交集**，只在两个物体重叠的区域创建新形状。![](/images/boolean_intersect.webp)


### 体素合并按钮
按下此按钮会对选中的物体执行体素合并操作。对单个物体执行时，会将其重新拓扑为均匀分布的多边形，这在物体存在拉伸多边形时非常有用。

### 分辨率
用于计算的体素三维网格的分辨率。当你修改此数值时，会在物体上叠加棋盘格图案，以预览多边形的大小。

### 构建多级分辨率
在目标分辨率之下创建多级分辨率层级。例如，如果分辨率为 400，且“构建多级分辨率”为 3，你会得到一个约 296,000 面的网格，同时还会有 3 级更低的细分层级：约 74,000、18,000、4,000 面。

### 保持锐利边缘
启用后会将体素网格吸附到边缘上。对简单形状效果最佳。

### 布尔按钮
按下此按钮会使用 Emmett Lalish 的 Manifold 库执行多边形布尔运算。 


## 分离（Separate）
如果你有一个由多个不相连部分组成的单一物体，可以将其拆分为多个物体。  
这可以视为[简单合并](#simple-merge)的反向操作。

![](/videos/merge_separate.mp4)


## 添加菜单（Add menu）

![](/images/scene_addmenu_overview.webp)

此菜单用于创建基础体（primitive）、组、相机、重复器和灯光。

基础体是可以通过参数调整的基本形状类型。当你将基础体调整到满意的形状后，需要对其进行“验证”（validate），这会将参数烘焙为可雕刻和绘制的多边形网格。基础体一旦验证，就不能再通过参数进行调整。


![](/images/scene_addmenu_top.webp)

### 在变换工具处创建（On gizmo）
启用后，新基础体会创建在当前选中形状或变换工具（gizmo）所在位置。禁用时，基础体会被放置在场景中心。

### 选择变换工具（Select gizmo）
启用后，在创建新基础体时会自动切换到变换工具。

### 高级（Advanced）

此菜单允许你设置新基础体、组、重复器的创建位置偏好。可以选择创建在选中物体处、世界原点处，或变换工具所在位置。


### UV
为基础体启用 UV。UV（也称纹理坐标）是在 3D 中用于将纹理贴到表面上的额外数据。它们会占用更多内存，但对大多数设备来说，除非你使用非常高的多边形数量（例如 1000 万面以上），一般不必担心。

### 基础体（Primitives）

| 基础体         | 图标                                      | 说明                                                                                                     |
| :------------: | :---------------------------------------: | :------------------------------------------------------------------------------------------------------: |
| 立方体（Box）  | ![](/icons/cube.webp)                    | 简单的立方体，你可以控制 X、Y、Z 方向的分段数                                                             |
| 球体（Sphere） | ![](/icons/circle.webp)                  | 为方便起见命名为 Sphere，但实际上是细分立方体，并强制启用 `Project on sphere`（投射到球体）              |
| 圆柱（Cylinder）| ![](/icons/cylinder.webp)               | 可以为圆柱添加中心孔，例如制作空心管                                                                     |
| 圆环（Torus）  | ![](/icons/torus.webp)                   | 圆环是制作戒指等形状的良好起点                                                                           |
| 圆锥（Cone）   | ![](/icons/cone.webp)                    | -                                                                                                        |
| 二十面体（Icosahedron） | ![](/icons/icosahedron.webp)      | -                                                                                                        |
| UV 球（UV-sphere） | ![](/icons/circle.webp)              | 拥有不均匀多边形布局的球体，参见[下方警告](#uv-sphere)                                                   |
| 平面（Plane）  | ![](/icons/rectangle.webp)               | 简单平面，注意这是唯一一个非封闭的基础体                                                                 |
| 管（Tube）     | ![](/icons/tool_tube.webp)               | 参见 [Tube](tools#tube)                                                                                  |
| 车削（Lathe）  | ![](/icons/tool_lathe.webp)              | 参见 [Lathe](tools#lathe)                                                                                |
| 三平面（Triplanar） | ![](/icons/triplanar.webp)          | 参见 [Triplanar](#triplanar)                                                                             |
| 阴影捕捉器（Shadow Catcher） | ![](/icons/material_shadow_catcher.webp) | 参见 [Shadow Catcher](#shadow-catcher)                                                   |
| 头部（Head）   | ![](/icons/face.webp)                    | 简单头部模型，带有一个用于在男性/女性之间混合的图层                                                       |

::: tip
如果你想知道启动 Nomad 时的默认基础网格是什么：它也是一个细分立方体。
不过，Nomad 的默认基础网格没有使用 `Project on sphere`，因此它并不是完美的球体。
:::

### 基础体工具栏

![](/images/scene_primitive_toolbar.gif)

创建基础体后，会出现一个工具栏用于控制其参数。

* `Validate` 将基础体烘焙为标准物体，以便进行雕刻和绘制。
* `Edit` 切换是否显示基础体的参数控制变换工具。该工具直接显示在基础体上，用于控制参数，例如立方体宽度或圆柱孔径。
* `Mirror` 切换是否在基础体上方放置镜像重复器。
* `...` 显示基础体菜单。

不同基础体在工具栏上会有额外选项：

* `Project` 球体是通过细分立方体构建的，这对雕刻更友好，但意味着它不是完美球体。此选项会将形状强制拉近为完美球体。二十面体也有此选项。
* `Cap` 切换形状的端盖，例如圆柱可以只在顶部、只在底部、两端都有或完全没有端盖。
* `Hole` 切换是否在形状中心创建孔洞。会在“无孔”、“单一半径孔”、“顶部和底部半径不同的孔”之间循环切换。
* `Radius` 切换圆柱是使用单一半径，还是顶部和底部使用不同半径。
* `Disk` 切换平面是四边形，还是圆形。

主工具栏下方的小工具栏可以在基础体参数变换工具和普通变换工具之间切换。

::: tip

点击工具栏标题可以在屏幕顶部和底部之间切换其位置。点击角落的箭头可以折叠工具栏。

:::


### 基础体菜单

![](/images/scene_primitive_menu.webp)

此菜单包含当前选中基础体的所有参数。参数是对形状的基本描述。例如，要描述一个戒指，你会描述它的外半径、内半径以及多边形数量。

大多数基础体参数都比较直观，并且有一些是所有基础体通用的：

* `UVs` 菜单顶部的小 UV 按钮用于切换是否创建 UV 坐标
* `Validate` 小的 validate 按钮会将基础体烘焙为标准物体，以便进行雕刻和绘制
* `Max faces` 设置物体多边形数量的上限，以避免设备崩溃
* `Post subdivision` 启用拓扑菜单中多级分辨率部分所选的细分级别。配合较低的拓扑分段，可以用来创建边角柔和的平滑基础体。例如，将立方体拓扑分段设为 2，后置细分设为 4，会得到一个边角平滑的立方体。
* `Linear subdivision` 设置在使用常规平滑细分前，先使用多少级线性细分。可用于控制细分表面边角的锐利或柔和程度。例如，将立方体拓扑分段设为 2，后置细分设为 4，然后在 0 到 4 之间调整线性细分级别，你会看到立方体的边角从柔和变为锐利。

### 拓扑（Topology）

用于控制基础体的多边形数量。通常这些控制是联动的，因此修改当前激活的一个滑块会均匀调整所有方向的多边形数量。你可以点按“取消链接”按钮，分别控制形状在 X/Y/Z 方向的分段数。

### 几何（Geometry）

用于控制基础体的整体尺寸。对方形形状来说是 X/Y/Z 尺寸，对圆形形状来说是半径。


### UV Sphere
::: warning
UV Sphere 不适合用于雕刻，尤其是在极点区域。

请优先使用 [Sphere](#sphere)、[Box](#box) 或 [Icosahedron](#icosahedron) 基础体，并配合 `Project on sphere` 选项。

注意，如果你将 `Division` 滑块设置为非常低的值，其拓扑仍然可以勉强用于雕刻。
之后可以使用 `Overall Subdivision` 滑块来提高多边形数量。

虽然不适合通用雕刻，但它非常适合用作眼球；如果你将球体旋转，使极点位于瞳孔位置，多边形布局会自然贴合虹膜和瞳孔的绘制与雕刻。
:::


### Triplanar
此基础体比较特殊，你应该使用[遮罩工具](tools.md#mask)在其上塑形。

![](/videos/triplanar.mp4)


::: tip
双击某个平面，相机会对该平面进行对焦。
如果你使用变换工具旋转了该基础体，则此功能将失效。
:::

Triplanar 会使用来自三个平面的遮罩信息填充体素网格，然后通过[体素重拓扑](topology.md#voxel-remeshere)将其多边形化。

每个平面都有自己的对称平面。

::: warning
每次你修改 Triplanar 基础体的尺寸，遮罩绘制的质量都会有所下降。

目前还没有“锁定”单个平面绘制的选项，未来可能会加入。
你可以使用[连接拓扑](stroke.md#connected-topology)来稍微缓解这一问题：如果光标精确落在某个平面上，就不会影响其他平面。
:::

### Shadow Catcher
添加一个带有阴影捕捉材质的平面。更多细节参见[阴影捕捉材质](material.md#shadow-catcher)。 


## 组/相机（Group/Camera）
### 组（Group）
创建一个“空”物体，你可以将其他物体作为子物体挂在其下。可以用来整理层级结构，例如将多个物体放入一个组中，然后将其折叠。组也可以作为移动物体的辅助工具：将多个物体放入一个组中，然后通过变换工具移动、旋转、缩放该组。

### 添加视图（Add view）
创建一个相机。

## 重复器（Repeaters）
![](/images/scene_primitive_repeaters.webp)

重复器是会对其子物体创建实例的节点。 

### 阵列（Array）
![](/images/scene_primitive_array.webp)

当物体作为此节点的子物体时，它们会被实例化为网格布局。选中该节点时，会出现以下控制项：
* Fit inside（适配内部） - 在控制阵列整体网格/盒子尺寸与控制实例间距之间切换
* CountX/Y/Z - 各轴上的实例数量
* OffsetX/Y/Z - 在启用“适配内部”时，实例之间的间距
* SizeX/Y/Z - 在启用“适配内部”时，整个阵列网格的宽/高/深

### 曲线（Curve）
![](/images/scene_primitive_curve.webp)
此节点会创建一条曲线，其子物体会沿曲线重复。选中该节点时，会出现以下控制项：
* Edit - 允许在曲线上添加点并移动曲线点
* Snap - 将曲线点吸附到其他几何体上
* Align - 让子物体沿曲线方向自动旋转对齐
* Count - 实例数量
* Closed - 切换曲线首尾是否闭合，或保持为开放曲线
* Radius - 为每个曲线点启用控制，用于控制实例的缩放
* Twist - 为每个曲线点启用控制，用于控制实例的扭转旋转
* B-spline - 切换实例是严格跟随曲线，还是使用 B 样条插值以获得更平滑的结果

### 放射（Radial）
![](/images/scene_primitive_radial.webp)

此节点的子物体会被实例化为圆形布局。移动子物体可以改变该重复器的半径。选中该节点时，会出现以下控制项：
* RadialX/Y/Z - 选择这些按钮可设置放射轴向，并设置实例数量。



### 镜像（Mirror）
![](/images/scene_primitive_mirror.webp)

此节点的子物体会在某个轴上被镜像。选中该节点时，会出现以下控制项：
* Gizmo - 启用变换工具以设置镜像中心。该中心也可以旋转和缩放。完成后再次点按 Gizmo 按钮以恢复标准控制项。
* X/Y/Z - 设置镜像平面

所有重复器都有一个 `Validate` 控制项，用于烘焙重复器的结果，并会询问如何执行烘焙：
* Join children - 将所有实例合并为一个物体
* Keep instances - 保留实例，但不再保留重复器作为“父节点”
* Un-instances - 将实例转换为独立物体

::: tip 提示：组合重复器
重复器可以相互嵌套，多个物体也可以作为重复器的子物体，从而产生复杂效果。

![](/images/scene_repeater_combine.webp)
:::

::: tip 提示：重复器枢轴（pivot）

某些重复器会尝试自动设置子物体的枢轴，因此即使你使用变换工具移动或旋转它们，它们也不会真正移动。如果你需要覆盖这种行为，可以在重复器和子物体之间插入一个组。这样你就可以独立于重复器来移动子物体。
:::

## 灯光（Light）

![](/images/scene_primitive_light.webp)

### 平行光（Directional）
创建一个平行光，类似太阳这种无限远的光源。

### 聚光灯（Spot）
创建一个聚光灯，可控制光锥宽度和柔和度。

### 点光源（Point）
创建一个点光源。

## 高级（Advanced）
### 聚焦到项目（Focus on item）
在场景列表中双击某个项目，会将 3D 视图中的相机对准该项目。

### 同步可见性（Sync visibility）
使用眼睛图标会影响所有选中的项目。 

### 实例：显示（Instance: Show）
在场景列表左侧显示彩色小胶囊，用于标识实例。


### 图标（Icons）
设置视图中组、灯光、相机、镜像图标的大小和不透明度。

### 层级连线（Hierarchy lines）
在视图中显示父物体与其子物体之间的连线。

## 底部工具栏
这些图标用于切换视图中组、灯光、相机、重复器以及层级连线的可见性。
