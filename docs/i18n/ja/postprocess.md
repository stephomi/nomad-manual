# ![](/icons/postprocess.webp) ポストプロセス 

このメニューでは、レンダリングの見た目に影響する Nomad のさまざまな要素を制御します。

![](/images/postprocess_overview_drac.webp)

ポストプロセスを使うことで、シーンの最終的な見た目を大きく変えることができます。

![](/images/postprocess_overview.webp)
*同じシーン。左がポストプロセス前、右がポストプロセス後。ライトやマテリアルの変更は一切なし。*

ポストプロセスは、デバイスによってはパフォーマンスに大きく影響します。
プリセットを失わずに素早くスカルプト／モデリングに戻れるよう、すべてのポストプロセスを無効化するためのグローバルチェックボックスがあります。
PBR レンダリングでは、[アンビエントオクルージョン](#ambient-occlusion-ssao)、[リフレクション](#reflection-ssr)、[トーンマッピング](#tone-mapping) を有効にしておくべきです。

ただし、スカルプト中は形状そのものに集中するため、ほとんどの場合ポストプロセスは無効にしておくのが望ましいです。


## Quality

![](/images/postprocess_quality.webp)
### Max frame sampling
Nomad は 1 フレームのレンダーに対して一定量のポストプロセス計算を行いますが、その結果はノイズっぽく見えることがあります。このコントロールは、何フレーム分レンダリングしてブレンドし、ノイズの多いアーティファクトを取り除くかを決定します。いくつかのエフェクト（例：カラーグレーディング）は追加サンプルを必要としませんが、グローバルイルミネーションのようなものはノイズをなくすために数百サンプルを必要とすることがあります。 

ビューポートでは、Nomad を放置すると画像品質が徐々に向上し、最大サンプル数に達したところで止まる様子が確認できます。この計算回数は、[Files メニュー](files) のレンダーセクションで「export png」をクリックしたときにも使用されます。

### Resolution multiplier
このスライダーはポストプロセスの解像度を制御します。x1.0 の値は、デバイスのピクセル解像度でレンダリングが行われることを意味します。x0.5 の値は半分の解像度でレンダリングし、高速ですが品質は低くなります。1 より大きい値では、より大きなサイズでレンダリングしてから縮小します。これにより品質が向上しノイズも減りますが、レンダリング時間は長くなります。

### Max samples

ポストプロセスの品質を上げますが、一般的には `Full resolution` の方が影響が大きいです。 

### Full resolution
有効にすると、Resolution multiplier を強制的に x1.0 にします。

### Denoiser (oidn)

画像にデノイザーを適用します。これにより、はるかに少ないサンプル数で済むようになります。これは `Full Resolution` が有効な場合にのみ機能します。デノイズ処理はすべてのサンプル計算が終わった後に行われ、プロセッサ負荷が高くなる場合があります。

## Preset browser
![](/images/postprocess_presets.webp)
画像をクリックすると、ポストプロセスのプリセットコレクションが表示されます。自分用のプリセットを定義するには、いずれかを選択して「clone」をクリックし、変更を加えます。保存するにはプリセット画像をクリックし、プリセットブラウザ内をもう一度クリックして「save」を選択します。


## Reflection (SSR)
このオプションを使うと、画面上に表示されている限り、オブジェクト同士が互いを反射できるようになります。
シーン内にメタリックで光沢のあるオブジェクトがある場合、このオプションは有効にしておくべきでしょう。
このオプションは PBR モードでのみ有効です。


| SSR off                    | SSR on                    |
| :------------------------: | :-----------------------: |
| ![](/images/ssr_off.webp) | ![](/images/ssr_on.webp) |

## Global Illumination (SSGI)

グローバルイルミネーションは、光がサーフェス間でどのように反射し合うかをシミュレートします。例えば、赤い壁は近くの白いオブジェクトに赤い光を投げかけます。アンビエントオクルージョンやリフレクションと組み合わせて使用すると、レンダリングのリアリズムを大きく高めることができます。 

`Strength` - グローバルイルミネーションの強さ。 



| SSGI off                   | SSGI on                   |
| :------------------------: | :-----------------------: |
| ![](/images/ssgi_off.webp) | ![](/images/ssgi_on.webp) |

_スポットライトは球体の後ろにあり、天井に向けられています。SSGI オフでは天井だけが照らされています。SSGI オンでは、天井から壁、壁から球体へと光がバウンスしています。_

## Ambient Occlusion (SSAO)
アンビエントオクルージョンは、光が届きにくい領域（角など）を暗くします。
この効果はモデルのジオメトリのみに依存します。

* `Strength`- 効果の強さ。
* `Size`- 効果がどの程度広がるか。
* `Curvature bias` - サーフェスの変化に対する感度。
* `Color` - オクルージョンに乗算される色味。クリエイティブな効果に使用します。


| SSAO off                    | SSAO on                    |
| :-------------------------: | :------------------------: |
| ![](/images/ssao_off.webp) | ![](/images/ssao_on.webp) |

::: tip
AO は、主に環境光で照らされている領域で最もよく見えます。強い直接光が当たっている領域では AO 効果はかなり弱くなります。

:::

## Depth of Field (DOF)
フォーカスから外れた領域にぼかし効果を追加します。

モデルをタップするだけでフォーカスポイントを変更できます。

* `Far blur` - フォーカスポイントより奥側に適用されるぼかし量。
* `Near blur` - フォーカスポイントとカメラの間に適用されるぼかし量。


| DOF off                   | DOF focus on far ring       | DOF focus on close ring    |
| :-----------------------: | :-------------------------: | :------------------------: |
| ![](/images/dof_off.webp) | ![](/images/dof_near.webp) | ![](/images/dof_far.webp) |


## Bloom
Bloom は、シーン内の明るい領域を発光させます。

* `Intensity` - 効果の強さ。
* `Radius` - 効果の広がり。
* `Threshold` - Bloom が始まるまでに必要な明るさ。値を低くするとすべてが Bloom し、高くすると最も明るいピクセルだけが Bloom します。
* `Color` - クリエイティブな効果のために Bloom に追加できる色味。

| Bloom off                    | Bloom with radius 0         | Bloom with radius 1         |
| :--------------------------: | :-------------------------: | :-------------------------: |
| ![](/images/bloom_off.webp) | ![](/images/bloom_r0.webp) | ![](/images/bloom_r1.webp) |


## Tone Mapping
トーンマッピングは、HDR 値を `[0, 1]` の範囲に再マッピングする処理です。
これを使わない（または `none` を選択）場合、1 を超える色成分はすべてクリップされます。
この範囲を超える色の変化は失われてしまいます。

* `None/Neutral/Agx/ACES` - 使用するトーンマッパーの種類。`None` は再マッピングを行いません（ただし他のコントロールは動作します）。他のオプションは異なるフィルムストックを選ぶようなもので、露出オーバーの値や色をそれぞれ異なる方法で処理します。非常に奥の深いトピックなので、詳しくは tone mapping、Agx、ACES などを調べてみてください。
* `Exposure` - 画像全体の明るさ。カメラの絞りを調整するのに似ています。画像を一括で明るく／暗くする簡単な方法です。
* `Saturation` - 色の強さ。1 がニュートラル、0 がモノクロ、1 より大きい値で彩度が増していきます。
* `Contrast` - 暗部をより暗く、明部をより明るくします。高い値ではアーティファクトを生む可能性があるため注意して使ってください。

`Tone Mapping` を無効にすると、ピクセルが明るすぎるために一部のディテールが消えてしまうことに注意してください。

| Tone Mapping off            | Tone Mapping on            |
| :-------------------------: | :------------------------: |
| ![](/images/tone_off.webp) | ![](/images/tone_on.webp) |

::: tip
トーンマッピングはグローバルイルミネーションの効果を強調できます。環境マップの強度を下げ、メインライトの強度を上げたうえで、トーンマッピングの `exposure` を上げると、バウンスライトの効果がより見えやすくなります。
:::

## Color Grading
Photoshop のカーブツールに似ており、画像内の色のバランスや分布を制御できます。`main` コントロールは全体のカラーバランスに影響し、`red` / `green` / `blue` コントロールで細かい調整が可能です。 

| Color Grading off             | Color Grading on             |
| :---------------------------: | :--------------------------: |
| ![](/images/grading_off.webp) | ![](/images/grading_on.webp) |

## Curvature
曲率が急激に変化している箇所を検出し、その領域に色を適用します。

* `Factor` - 効果全体の強さ
* `Bump` - 鋭い凸形状の変化をどの程度検出し、そこに選択した色（デフォルトでは白）を配置するか
* `Cavity` - 凹形状の変化をどの程度検出し、そこに選択した色（デフォルトでは黒）を配置するか


| Curvature off                    | Curvature on                   |
| :------------------------------: | :----------------------------: |
| ![](/images/curvature_off.webp) | ![](/images/curvature_on.webp) |


## Chromatic Aberration
画面端で光が分解されるレンズアーティファクトをシミュレートします。

* `Strength` - 画像の赤／緑／青成分が画面端に向かってどの程度分離されるか

| Chromatic off                 | Chromatic on                 |
| :---------------------------: | :--------------------------: |
| ![](/images/chroma_off.webp) | ![](/images/chroma_on.webp) |


## Vignette
画面端を暗くすることでレンズアーティファクトをシミュレートします。

* `Size` - 画像上に配置される反転楕円のサイズ
* `Hardness` - その楕円が画像上にどの程度ぼかされて、あるいはシャープにミックスされるか


| Vignette off                    | Vignette on                    |
| :-----------------------------: | :----------------------------: |
| ![](/images/vignette_off.webp) | ![](/images/vignette_on.webp) |

## Grain
グレイン効果を追加します。画像を少しだけ「人工的でない」印象にするのに役立ちます。

* `Strength` - 画像に追加されるグレイン／ノイズの量。


| Grain off                    | Grain on                   |
| :--------------------------: | :------------------------: |
| ![](/images/grain_off.webp) | ![](/images/grain_on.webp) |


## Sharpness
Photoshop や写真加工アプリにあるものと似たシャープ効果です。

* `Strength` - 画像に適用されるシャープの量。


| Sharpness off                  | Sharpness on                 |
| :----------------------------: | :--------------------------: |
| ![](/images/sharpen_off.webp) | ![](/images/sharpen_on.webp) |

## Pixel Art
レトロゲーム風のピクセルアートをシミュレートします。

* `Slider` - ピクセルのサイズ
* `Allow frame sampling` - 黒いピクセルが大量に出る場合は、これをオンにしてみてください。デフォルトのサンプリングを上書きします。

| Pixel off                   | Pixel on                   |
| :-------------------------: | :------------------------: |
| ![](/images/pixel_off.webp) | ![](/images/pixel_on.webp) |

## Scanline
古い CRT モニターの見た目をシミュレートします。

* `Factor` - ラインの強さ
* `Spacing` - ラインの間隔（サイズ）

| Scanline off                   | Scanline on                   |
| :----------------------------: | :---------------------------: |
| ![](/images/scanline_off.webp) | ![](/images/scanline_on.webp) |


## Dithering

ディザリングによってピクセルを揺らし、バンディングアーティファクトを軽減します。通常は有効にしておくべきですが、デプスマップの書き出しなど、特定のデータ用途では無効にすることもあります。
